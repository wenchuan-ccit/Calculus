<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®ç©åˆ† (2) - 7.4 éƒ¨åˆ†åˆ†å¼ç©åˆ†æ³• | Prof. Wu Wen-Chuan</title>
    
    <!-- 1. æ ¸å¿ƒæ¨£å¼èˆ‡åº«è¼‰å…¥ -->
    <!-- Tailwind CSS (æ¨£å¼æ¡†æ¶) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (å‰ç«¯æ¡†æ¶) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (JSX ç·¨è­¯å™¨) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- KaTeX (æ•¸å­¸å…¬å¼æ¸²æŸ“) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    
    <!-- è‡ªå®šç¾©æ¨£å¼ -->
    <style>
        /* å¹³æ»‘æ»¾å‹• */
        html { scroll-behavior: smooth; }
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #fdf2f8; }
        ::-webkit-scrollbar-thumb { background: #fbcfe8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #f472b6; }
        /* æ•¸å­¸å…¬å¼å®¹å™¨æ¨£å¼ - å…è¨±æ°´å¹³æ»¾å‹• */
        .math-display { overflow-x: auto; overflow-y: hidden; }
    </style>
</head>
<body class="bg-yellow-50 font-sans text-gray-800 selection:bg-pink-200">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // 2. å·¥å…·çµ„ä»¶ (Utilities)
        // ==========================================

        /**
         * LaTeX æ¸²æŸ“çµ„ä»¶
         */
        const Latex = ({ children, block = false, fontSize = '0.9em' }) => {
            const spanRef = useRef(null);

            useEffect(() => {
                if (window.katex && spanRef.current) {
                    try {
                        const content = typeof children === 'string' ? children : '';
                        window.katex.render(content, spanRef.current, {
                            throwOnError: false,
                            displayMode: block,
                        });
                    } catch (e) {
                        console.warn("KaTeX render error", e);
                        if (spanRef.current) spanRef.current.innerText = String(children);
                    }
                }
            }, [children, block]);

            return <span ref={spanRef} style={{ margin: '0 4px', display: block ? 'block' : 'inline-block', fontSize: fontSize }} />;
        };

        // ==========================================
        // 3. UI å­çµ„ä»¶ (Sub-components)
        // ==========================================

        const Navbar = ({ t, isMenuOpen, setIsMenuOpen, toggleLang }) => {
            return (
                <nav className="sticky top-0 z-50 w-full bg-white/90 px-6 py-4 shadow-md backdrop-blur-md transition-all">
                    <div className="flex items-center justify-between max-w-7xl mx-auto">
                        <div className="flex flex-col">
                            <h1 className="bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-2xl font-black tracking-tight text-transparent md:text-3xl">
                                {t.title}
                            </h1>
                            <span className="text-base font-medium text-gray-500 md:text-xl">
                                {t.teacher}
                            </span>
                        </div>

                        <div className="hidden items-center gap-6 md:flex">
                            {t.menu.map((item, i) => (
                                <a key={i} href={`#part${i+1}`} className="text-xl font-bold text-gray-600 hover:text-pink-500 transition-colors">{item}</a>
                            ))}
                            <button 
                                onClick={toggleLang}
                                className="flex items-center gap-2 rounded-full bg-purple-100 px-5 py-2 text-lg font-bold text-purple-700 transition-all hover:bg-purple-200 hover:shadow-md active:scale-95"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                {t.langBtn}
                            </button>
                        </div>

                        <button 
                            className="rounded-full bg-gray-100 p-2 text-gray-600 md:hidden hover:bg-gray-200"
                            onClick={() => setIsMenuOpen(!isMenuOpen)}
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
                        </button>
                    </div>

                    {isMenuOpen && (
                        <div className="mt-4 flex flex-col gap-4 border-t border-gray-100 pt-4 md:hidden">
                            {t.menu.map((item, i) => (
                                <a key={i} href={`#part${i+1}`} onClick={() => setIsMenuOpen(false)} className="px-2 py-1 text-lg font-bold text-gray-600">{item}</a>
                            ))}
                            <button 
                                onClick={() => { toggleLang(); setIsMenuOpen(false); }}
                                className="flex w-full items-center justify-center gap-2 rounded-xl bg-purple-100 py-3 font-bold text-purple-700"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                {t.langBtn}
                            </button>
                        </div>
                    )}
                </nav>
            );
        };

        const UnitHeader = ({ t }) => (
            <div className="mb-8 text-center animate-in fade-in zoom-in duration-500">
                <h2 className="mb-2 text-4xl font-black text-black md:text-5xl">
                    <span className="mr-3 text-black">{t.unitId}</span>
                    {t.unitTitle}
                </h2>
                <p className="text-2xl font-bold text-gray-500">{t.unitSub}</p>
            </div>
        );

        const Part1 = ({ t }) => (
            <section id="part1" className="scroll-mt-32 rounded-[2rem] bg-pink-100 p-8 shadow-lg shadow-pink-100/50 md:p-12 transition-all hover:shadow-xl">
                <div className="mb-6 flex items-center gap-3">
                    <div className="flex h-12 w-12 items-center justify-center rounded-full bg-white text-pink-500 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                    </div>
                    <h2 className="text-2xl font-black text-pink-700 md:text-3xl">{t.part1Title}</h2>
                </div>
                
                <div className="space-y-8 rounded-3xl bg-white/60 p-6 md:p-8">
                    <h3 className="text-2xl font-bold text-gray-800">{t.part1Topic}</h3>
                    <div className="text-xl leading-relaxed text-gray-700">{t.part1Desc}</div>

                    {/* è§€å¿µé¡æ¯”å€å¡Š */}
                    <div className="bg-purple-50 py-4 px-6 rounded-2xl border-l-8 border-purple-400">
                        <h4 className="font-bold text-purple-800 text-xl mb-2 flex items-center gap-2">
                            <span>ğŸ’¡</span> {t.analogyTitle}
                        </h4>
                        <div className="text-xl text-gray-700 leading-relaxed">
                            {t.analogyDesc}
                        </div>
                    </div>
                    
                    {/* Process Block */}
                    <div className="bg-pink-50 py-4 px-6 rounded-2xl border-l-8 border-pink-400">
                        <h4 className="font-bold text-pink-800 text-xl mb-2">{t.processTitle}</h4>
                        <ul className="list-decimal pl-6 space-y-3 text-xl text-gray-700">
                            <li>
                                <span className="font-bold">Step 1: </span> {t.processStep1}
                            </li>
                            <li>
                                <span className="font-bold">Step 2: </span> {t.processStep2}
                            </li>
                            <li>
                                <span className="font-bold">Step 3: </span> {t.processStep3}
                            </li>
                            <li>
                                <span className="font-bold">Step 4: </span> {t.processStep4}
                            </li>
                        </ul>
                    </div>

                    {/* Cases Block */}
                    <div className="bg-white p-6 rounded-2xl border-l-8 border-pink-400 shadow-sm">
                        <h4 className="font-bold text-pink-800 text-xl mb-4">{t.casesTitle}</h4>
                        <ul className="space-y-4 text-lg text-gray-700">
                            <li>
                                <span className="font-bold">{t.case1}</span> 
                                <span className="ml-2"><Latex fontSize="0.9em">{'\\displaystyle \\frac{P(x)}{(ax+b)...} \\to \\frac{A}{ax+b}'}</Latex></span>
                            </li>
                            <li>
                                <span className="font-bold">{t.case2}</span> 
                                <span className="ml-2"><Latex fontSize="0.9em">{'\\displaystyle \\frac{P(x)}{(ax+b)^r...} \\to \\frac{A_1}{ax+b} + \\dots + \\frac{A_r}{(ax+b)^r}'}</Latex></span>
                            </li>
                            <li>
                                <span className="font-bold">{t.case3}</span> 
                                <span className="ml-2"><Latex fontSize="0.9em">{'\\displaystyle \\frac{P(x)}{(ax^2+bx+c)...} \\to \\frac{Ax+B}{ax^2+bx+c}'}</Latex></span>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
        );

        const Part2 = ({ t, activeExList, activeExampleId, setActiveExampleId }) => {
            const activeEx = activeExList.find(e => e.id === activeExampleId) || activeExList[0];
            return (
                <section id="part2" className="scroll-mt-32 rounded-[2rem] bg-blue-100 p-8 shadow-lg shadow-blue-100/50 md:p-12 transition-all hover:shadow-xl">
                    <div className="mb-6 flex items-center gap-3">
                        <div className="flex h-12 w-12 items-center justify-center rounded-full bg-white text-blue-500 shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
                        </div>
                        <h2 className="text-2xl font-black text-blue-700 md:text-3xl">{t.part2Title}</h2>
                    </div>

                    <div className="mb-8 flex flex-wrap gap-3">
                        {activeExList.map((ex) => (
                            <button
                                key={ex.id}
                                onClick={() => setActiveExampleId(ex.id)}
                                className={`rounded-full px-6 py-3 text-lg font-bold transition-all shadow-sm ${
                                    activeExampleId === ex.id
                                        ? "bg-blue-600 text-white shadow-lg shadow-blue-500/30 scale-105"
                                        : "bg-white text-blue-600 hover:bg-blue-50 hover:scale-105"
                                }`}
                            >
                                {t.btnLabel} {ex.id}
                            </button>
                        ))}
                    </div>

                    <div className="space-y-8">
                        <div key={activeEx.id} className="rounded-3xl bg-white/60 p-6 md:p-8 shadow-inner">
                            <div className="border-b-2 border-blue-200 pb-6 mb-6">
                                <h3 className="text-2xl font-bold text-blue-800 mb-3">{activeEx.title}</h3>
                                <div className="flex flex-wrap items-center gap-4 text-lg font-bold text-gray-800">
                                    <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-lg">{t.btnLabel} {activeEx.id}:</span>
                                    <div className="rounded-xl bg-white px-6 py-3 text-blue-600 shadow-md ring-1 ring-blue-100 math-display">
                                        <Latex block fontSize="0.9em">{activeEx.math}</Latex>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-6">
                                {activeEx.steps.map((step, idx) => (
                                    <div key={idx} className="group rounded-2xl bg-white p-6 ring-2 ring-blue-200 transition-all hover:shadow-lg hover:ring-blue-400">
                                        <h4 className="mb-3 flex items-center gap-3 text-lg font-bold text-blue-700">
                                            <span className="flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-sm text-white font-black">
                                                {idx + 1}
                                            </span>
                                            {step.t}
                                        </h4>
                                        <div className="mb-4 text-lg text-gray-600 pl-11">{step.d}</div>
                                        <div className="bg-blue-50 p-4 text-center text-lg font-bold text-blue-900 rounded-xl math-display border border-blue-100">
                                            <Latex block fontSize="0.9em">{step.m}</Latex>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const Part3 = ({ t, activePracList, activePracticeId, setActivePracticeId }) => {
            const activePrac = activePracList.find(p => p.id === activePracticeId) || activePracList[0];
            return (
                <section id="part3" className="scroll-mt-32 rounded-[2rem] bg-green-100 p-8 shadow-lg shadow-green-100/50 md:p-12 transition-all hover:shadow-xl">
                    <div className="flex items-center gap-3 mb-6">
                        <div className="flex h-12 w-12 items-center justify-center rounded-full bg-white text-green-500 shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
                        </div>
                        <h2 className="text-2xl font-black text-green-700 md:text-3xl">{t.part3Title}</h2>
                    </div>

                    <div className="mb-8 flex flex-wrap gap-3">
                        {activePracList.map((p) => (
                            <button
                                key={p.id}
                                onClick={() => setActivePracticeId(p.id)}
                                className={`rounded-full px-6 py-3 text-lg font-bold transition-all shadow-sm ${
                                    activePracticeId === p.id
                                        ? "bg-green-600 text-white shadow-lg shadow-green-500/30 scale-105"
                                        : "bg-white text-green-600 hover:bg-green-50 hover:scale-105"
                                }`}
                            >
                                {t.btnPracticeLabel} {p.id}
                            </button>
                        ))}
                    </div>

                    <div className="mt-4 rounded-3xl bg-white/60 p-6 md:p-8">
                        <p className="mb-8 text-xl text-gray-700 font-medium">{t.part3Desc}</p>
                        
                        <div key={activePrac.id} className="rounded-3xl bg-white p-6 md:p-8 shadow-md border-2 border-green-300 animate-in fade-in slide-in-from-bottom-4 duration-300">
                            <div className="border-b-2 border-green-100 pb-6 mb-6">
                                <h3 className="text-2xl font-bold text-green-800 mb-3">{activePrac.title}</h3>
                                <div className="flex flex-wrap items-center gap-4 text-lg font-bold text-gray-800">
                                    <span className="bg-green-100 text-green-800 px-3 py-1 rounded-lg">{t.btnPracticeLabel} {activePrac.id}:</span>
                                    <div className="rounded-xl bg-white px-6 py-3 text-green-700 shadow-md ring-1 ring-green-100 math-display">
                                        <Latex block fontSize="0.9em">{activePrac.math}</Latex>
                                    </div>
                                </div>
                            </div>

                            <div className="mt-6 space-y-6">
                                {activePrac.steps.map((step, idx) => (
                                    <div key={idx} className="group rounded-2xl bg-white p-6 ring-2 ring-green-200 transition-all hover:shadow-lg hover:ring-green-400">
                                        <h4 className="mb-3 flex items-center gap-3 text-lg font-bold text-green-600">
                                            <span className="flex h-8 w-8 items-center justify-center rounded-full bg-green-600 text-sm text-white font-black">
                                                {idx + 1}
                                            </span>
                                            {step.t}
                                        </h4>
                                        <div className="mb-4 text-lg text-gray-600 pl-11">{step.d}</div>
                                        <div className="bg-green-50 p-4 text-center text-lg font-bold text-green-800 rounded-xl math-display border border-green-100">
                                            <Latex block fontSize="0.9em">{step.m}</Latex>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const App = () => {
            const [lang, setLang] = useState('zh');
            const [katexLoaded, setKatexLoaded] = useState(false);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [activeExampleId, setActiveExampleId] = useState(1);
            const [activePracticeId, setActivePracticeId] = useState(1);

            useEffect(() => {
                const checkKatex = setInterval(() => {
                    if (window.katex) {
                        setKatexLoaded(true);
                        clearInterval(checkKatex);
                    }
                }, 100);
                setTimeout(() => setKatexLoaded(true), 3000); 
                return () => clearInterval(checkKatex);
            }, []);

            const toggleLang = () => {
                setLang(prev => prev === 'zh' ? 'en' : 'zh');
                setIsMenuOpen(false);
            };

            const t = DATA[lang];
            const activeExList = EXAMPLES_DATA[lang];
            const activePracList = PRACTICE_DATA[lang];

            if (!katexLoaded) {
                return (
                    <div className="flex h-screen w-full items-center justify-center bg-yellow-50 text-xl font-bold text-gray-500">
                        Loading Math Engine...
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-yellow-50 font-sans text-gray-800 selection:bg-pink-200">
                    <Navbar t={t} isMenuOpen={isMenuOpen} setIsMenuOpen={setIsMenuOpen} toggleLang={toggleLang} />
                    <main className="mx-auto mt-16 flex max-w-6xl flex-col gap-16 px-4 pb-20">
                        <UnitHeader t={t} />
                        <Part1 t={t} />
                        <Part2 t={t} activeExList={activeExList} activeExampleId={activeExampleId} setActiveExampleId={setActiveExampleId} />
                        <Part3 t={t} activePracList={activePracList} activePracticeId={activePracticeId} setActivePracticeId={setActivePracticeId} />
                    </main>
                    <footer className="mt-12 bg-white py-12 text-center text-gray-400 border-t border-gray-100">
                        <p className="text-lg">Â© 2025 Calculus (2) Course. Prof. Wu Wen-Chuan.</p>
                        <p className="mt-2 text-sm">Designed for Student Success</p>
                    </footer>
                </div>
            );
        };

        // ==========================================
        // 4. è³‡æ–™å®šç¾© (Data)
        // ==========================================

        const DATA = {
            zh: {
                title: "å¾®ç©åˆ† (2)",
                teacher: "æˆèª²è€å¸«: å³æ–‡éŠ“ (Prof. Wu Wen-Chuan)",
                menu: ["æ ¸å¿ƒæ¦‚å¿µ", "ç¯„ä¾‹èªªæ˜", "å‹•æ‰‹ç·´ç¿’"],
                langBtn: "English",
                unitId: "7.4",
                unitTitle: "éƒ¨åˆ†åˆ†å¼ç©åˆ†æ³•",
                unitSub: "Partial Fractions",
                part1Title: "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ ¸å¿ƒæ¦‚å¿µ",
                part1Topic: "åˆ©ç”¨éƒ¨åˆ†åˆ†å¼æ‹†è§£æœ‰ç†å‡½æ•¸ç©åˆ†",
                part1Desc: (
                    <span>
                        æ‰€è¬‚ã€Œæœ‰ç†å‡½æ•¸ã€æ˜¯æŒ‡å…©å€‹å¤šé …å¼ç›¸é™¤çš„å‡½æ•¸ã€‚ç•¶ç›´æ¥ç©åˆ†å›°é›£æ™‚ï¼Œæˆ‘å€‘åˆ©ç”¨éƒ¨åˆ†åˆ†å¼æ³•å°‡å…¶æ‹†è§£ç‚ºæ•¸å€‹ç°¡å–®çš„åˆ†å¼ã€‚
                    </span>
                ),
                analogyTitle: "è§€å¿µé¡æ¯”ï¼šæ¨‚é«˜æ¨¡å‹çš„æ‹†è§£",
                analogyDesc: (
                    <span>
                        éƒ¨åˆ†åˆ†å¼æ³•å°±åƒæ˜¯æŠŠä¸€å€‹å·¨å¤§çš„æ¨‚é«˜æˆå“ï¼ˆè¤‡é›œå‡½æ•¸ï¼‰æ‹†è§£æˆä¸€å¡Šå¡Šç´°å°çš„ç©æœ¨ï¼ˆç°¡å–®åˆ†å¼ï¼‰ã€‚é›–ç„¶é›¶ä»¶è®Šå¤šäº†ï¼Œä½†æ¯ä¸€å¡Šéƒ½èƒ½è¼•é¬†åœ°åˆ†é¡ä¸¦è™•ç†ï¼ˆç©åˆ†ï¼‰ã€‚
                    </span>
                ),
                processTitle: "è§£é¡Œæ ¸å¿ƒæµç¨‹ (Standard Procedure)",
                processStep1: "åˆ¤æ–·åˆ†å¼é¡å‹ï¼šè‹¥åˆ†å­æ¬¡æ•¸ â‰¥ åˆ†æ¯æ¬¡æ•¸ï¼Œé ˆå…ˆç”¨é•·é™¤æ³•åŒ–ç°¡ã€‚",
                processStep2: "åˆ†æ¯å› å¼åˆ†è§£ï¼šå°‡åˆ†æ¯åˆ†è§£ç‚ºç·šæ€§å› å¼æˆ–ä¸å¯ç´„äºŒæ¬¡å› å¼ã€‚",
                processStep3: "è¨­å®šéƒ¨åˆ†åˆ†å¼æ¶æ§‹ï¼šæ ¹æ“šåˆ†æ¯é¡å‹è¨­å®šå¾…å®šä¿‚æ•¸ A, B, Cã€‚",
                processStep4: "æ±‚è§£ä¿‚æ•¸ä¸¦ç©åˆ†ï¼šä»£å…¥æ•¸å€¼æˆ–æ¯”è¼ƒä¿‚æ•¸æ±‚å‡ºæœªçŸ¥æ•¸ï¼Œæœ€å¾Œå¥—ç”¨ç©åˆ†å…¬å¼ã€‚",
                casesTitle: "æ‹†è§£è¦å‰‡ (Decomposition Rules)",
                case1: "Case I (ç›¸ç•°ç·šæ€§å› å¼):",
                case2: "Case II (é‡æ ¹ç·šæ€§å› å¼):",
                case3: "Case III (ä¸å¯ç´„äºŒæ¬¡å› å¼):",
                part2Title: "ç¬¬äºŒéƒ¨åˆ†ï¼šç¯„ä¾‹èªªæ˜",
                part3Title: "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‹•æ‰‹ç·´ç¿’",
                part3Desc: "è«‹å˜—è©¦è§£æ±ºä»¥ä¸‹é¡Œç›®ï¼Œä¸¦åƒè€ƒè©³ç´°æ­¥é©Ÿæ ¸å°ï¼š",
                btnLabel: "ä¾‹é¡Œ",
                btnPracticeLabel: "ç·´ç¿’é¡Œ"
            },
            en: {
                title: "Calculus (2)",
                teacher: "Instructor: Prof. Wu Wen-Chuan",
                menu: ["Concepts", "Examples", "Practice"],
                langBtn: "ç¹é«”ä¸­æ–‡",
                unitId: "7.4",
                unitTitle: "Partial Fractions",
                unitSub: "Integration of Rational Functions",
                part1Title: "Part 1: Core Concepts",
                part1Topic: "Decomposing Rational Functions for Integration",
                part1Desc: (
                    <span>
                        Rational functions are quotients of polynomials. Partial fraction decomposition breaks complex rational functions into simpler sums that are easier to integrate.
                    </span>
                ),
                analogyTitle: "Analogy: Dismantling a Lego Model",
                analogyDesc: (
                    <span>
                        Partial fraction decomposition is like taking apart a large Lego model (complex function) into individual bricks (simple fractions). Though there are more pieces, each one is standard and easy to handle (integrate).
                    </span>
                ),
                processTitle: "Core Procedure",
                processStep1: "Check Degree: Use long division if degree(Num) â‰¥ degree(Denom).",
                processStep2: "Factor Denominator: Factor into linear or irreducible quadratic terms.",
                processStep3: "Setup Decomposition: Set up partial fractions based on factors.",
                processStep4: "Solve & Integrate: Find coefficients and integrate each term.",
                casesTitle: "Decomposition Rules",
                case1: "Case I (Distinct Linear):",
                case2: "Case II (Repeated Linear):",
                case3: "Case III (Irreducible Quadratic):",
                part2Title: "Part 2: Examples",
                part3Title: "Part 3: Practice",
                part3Desc: "Solve the problems and check the detailed steps below:",
                btnLabel: "Ex",
                btnPracticeLabel: "Q"
            }
        };

        const EXAMPLES_DATA = {
            zh: [
                {
                    id: 1, label: "Ex 1", title: "å‡åˆ†å¼ (Improper Fraction) (P.507)",
                    math: "\\displaystyle \\int \\frac{x^3+x}{x-1} \\, dx",
                    steps: [
                        { t: "Step 1: åˆ¤æ–·åˆ†å¼é¡å‹ (Check Degree)", d: (<span>åˆ†å­æ¬¡æ•¸ (3) <Latex>{'\\ge'}</Latex> åˆ†æ¯æ¬¡æ•¸ (1)ï¼Œç‚ºå‡åˆ†å¼ï¼Œéœ€å…ˆåšé•·é™¤æ³•ã€‚</span>), m: "\\displaystyle \\text{Degree}(x^3+x) = 3 \\ge \\text{Degree}(x-1) = 1" },
                        { t: "Step 2: é•·é™¤æ³• (Long Division)", d: (<span>å°‡ <Latex>{'x^3+x'}</Latex> é™¤ä»¥ <Latex>{'x-1'}</Latex>ã€‚å•†å¼ç‚º <Latex>{'x^2+x+2'}</Latex>ï¼Œé¤˜å¼ç‚º <Latex>{'2'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{x^3+x}{x-1} = x^2 + x + 2 + \\frac{2}{x-1}" },
                        { t: "Step 3: é€é …ç©åˆ† (Integrate)", d: (<span>å°‡åŸç©åˆ†æ‹†è§£ç‚ºå¤šé …å¼ç©åˆ†èˆ‡ç°¡å–®åˆ†å¼ç©åˆ†ã€‚</span>), m: "\\displaystyle \\int (x^2 + x + 2 + \\frac{2}{x-1}) \\, dx" },
                        { t: "Step 4: è¨ˆç®—çµæœ (Result)", d: (<span>å¤šé …å¼ç”¨å†ªæ¬¡æ³•å‰‡ï¼Œåˆ†å¼ç”¨å°æ•¸æ³•å‰‡ã€‚</span>), m: "\\displaystyle \\frac{1}{3}x^3 + \\frac{1}{2}x^2 + 2x + 2\\ln|x-1| + C" }
                    ]
                },
                {
                    id: 2, label: "Ex 2", title: "ç›¸ç•°ç·šæ€§å› å¼ (Distinct Linear) (P.508)",
                    math: "\\displaystyle \\int \\frac{x^2+2x-1}{2x^3+3x^2-2x} \\, dx",
                    steps: [
                        { t: "Step 1: åˆ†æ¯å› å¼åˆ†è§£ (Factor Denom)", d: (<span>æå‡º <Latex>{'x'}</Latex> å¾Œåˆ†è§£äºŒæ¬¡å¼ã€‚</span>), m: "\\displaystyle 2x^3+3x^2-2x = x(2x^2+3x-2) = x(2x-1)(x+2)" },
                        { t: "Step 2: è¨­å®šæ¶æ§‹ (Setup)", d: (<span>åˆ†æ¯ç‚ºä¸‰å€‹ç›¸ç•°ä¸€æ¬¡å¼ï¼Œè¨­å®šä¸‰å€‹å¸¸æ•¸ <Latex>{'A, B, C'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{x^2+2x-1}{x(2x-1)(x+2)} = \\frac{A}{x} + \\frac{B}{2x-1} + \\frac{C}{x+2}" },
                        { t: "Step 3: é€šåˆ†æ¯”è¼ƒ (Find Numerator)", d: (<span>å°‡å³å¼é€šåˆ†ï¼Œåˆ†å­æ‡‰ç­‰æ–¼å·¦å¼åˆ†å­ã€‚</span>), m: "\\displaystyle x^2+2x-1 = A(2x-1)(x+2) + Bx(x+2) + Cx(2x-1)" },
                        { t: "Step 4: æ±‚è§£ä¿‚æ•¸ (Solve A, B, C)", d: (<span>ä»£å…¥ç‰¹æ®Šå€¼ï¼š<Latex>{'x=0'}</Latex> æ±‚ Aï¼Œ<Latex>{'x=1/2'}</Latex> æ±‚ Bï¼Œ<Latex>{'x=-2'}</Latex> æ±‚ Cã€‚</span>), m: "\\displaystyle x=0 \\implies -1=A(-2) \\implies A=1/2 \\\\ x=1/2 \\implies 1/4=B(5/4) \\implies B=1/5 \\\\ x=-2 \\implies -1=C(10) \\implies C=-1/10" },
                        { t: "Step 5: ç©åˆ† (Integrate)", d: (<span>ä»£å›ä¿‚æ•¸ä¸¦ç©åˆ†ã€‚æ³¨æ„ <Latex>{'\\int \\frac{1}{2x-1} dx = \\frac{1}{2}\\ln|2x-1|'}</Latex>ã€‚</span>), m: "\\displaystyle \\int (\\frac{1/2}{x} + \\frac{1/5}{2x-1} - \\frac{1/10}{x+2}) dx = \\frac{1}{2}\\ln|x| + \\frac{1}{10}\\ln|2x-1| - \\frac{1}{10}\\ln|x+2| + K" }
                    ]
                },
                {
                    id: 4, label: "Ex 4", title: "é‡æ ¹ç·šæ€§å› å¼ (Repeated Linear) (P.510)",
                    math: "\\displaystyle \\int \\frac{x^4-2x^2+4x+1}{x^3-x^2-x+1} \\, dx",
                    steps: [
                        { t: "Step 1: é•·é™¤æ³• (Long Division)", d: (<span>åˆ†å­æ¬¡æ•¸å¤§æ–¼åˆ†æ¯ï¼Œå…ˆé™¤ã€‚å¾—åˆ° <Latex>{'x+1'}</Latex> èˆ‡é¤˜å¼ <Latex>{'4x'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{x^4-2x^2+4x+1}{x^3-x^2-x+1} = x+1 + \\frac{4x}{x^3-x^2-x+1}" },
                        { t: "Step 2: åˆ†æ¯åˆ†è§£ (Factor Denom)", d: (<span>è§€å¯Ÿåˆ†æ¯ï¼Œå¯åˆ†è§£ç‚º <Latex>{'(x-1)^2(x+1)'}</Latex>ã€‚</span>), m: "\\displaystyle x^3-x^2-x+1 = x^2(x-1)-(x-1) = (x^2-1)(x-1) = (x+1)(x-1)^2" },
                        { t: "Step 3: è¨­å®šæ¶æ§‹ (Setup)", d: (<span>åŒ…å«é‡æ ¹ <Latex>{'(x-1)^2'}</Latex>ï¼Œéœ€è¨­å…©é …ã€‚</span>), m: "\\displaystyle \\frac{4x}{(x-1)^2(x+1)} = \\frac{A}{x-1} + \\frac{B}{(x-1)^2} + \\frac{C}{x+1}" },
                        { t: "Step 4: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span>é€šåˆ†å¾Œä»£å€¼ã€‚å¾— <Latex>{'A=1, B=2, C=-1'}</Latex>ã€‚</span>), m: "\\displaystyle 4x = A(x-1)(x+1) + B(x+1) + C(x-1)^2 \\\\ x=1 \\implies 4=2B \\implies B=2 \\\\ x=-1 \\implies -4=4C \\implies C=-1 \\\\ x=0 \\implies 0=-A+B+C \\implies A=1" },
                        { t: "Step 5: ç©åˆ† (Integrate)", d: (<span>å¤šé …å¼èˆ‡åˆ†å¼åˆ†åˆ¥ç©åˆ†ã€‚</span>), m: "\\displaystyle \\int (x+1 + \\frac{1}{x-1} + \\frac{2}{(x-1)^2} - \\frac{1}{x+1}) dx = \\frac{x^2}{2} + x + \\ln|x-1| - \\frac{2}{x-1} - \\ln|x+1| + K" }
                    ]
                },
                {
                    id: 5, label: "Ex 5", title: "ä¸å¯ç´„äºŒæ¬¡å› å¼ (Irreducible Quadratic) (P.511)",
                    math: "\\displaystyle \\int \\frac{2x^2-x+4}{x^3+4x} \\, dx",
                    steps: [
                        { t: "Step 1: åˆ†æ¯åˆ†è§£ (Factor)", d: (<span>æå‡º <Latex>{'x'}</Latex>ï¼Œ<Latex>{'x^2+4'}</Latex> ç„¡æ³•å†åˆ†è§£ï¼ˆåˆ¤åˆ¥å¼å°æ–¼0ï¼‰ã€‚</span>), m: "\\displaystyle x^3+4x = x(x^2+4)" },
                        { t: "Step 2: è¨­å®šæ¶æ§‹ (Setup)", d: (<span>äºŒæ¬¡å› å¼ <Latex>{'x^2+4'}</Latex> ä¸Šæ–¹éœ€è¨­ä¸€æ¬¡å¼ <Latex>{'Bx+C'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{2x^2-x+4}{x(x^2+4)} = \\frac{A}{x} + \\frac{Bx+C}{x^2+4}" },
                        { t: "Step 3: é€šåˆ†æ±‚è§£ (Solve)", d: (<span>é€šåˆ†ä¸¦æ¯”è¼ƒä¿‚æ•¸ã€‚</span>), m: "\\displaystyle 2x^2-x+4 = A(x^2+4) + (Bx+C)x \\\\ x=0 \\implies 4=4A \\implies A=1 \\\\ \\text{Coeff } x^2: 2=A+B \\implies B=1 \\\\ \\text{Coeff } x: -1=C" },
                        { t: "Step 4: æ‹†è§£ç©åˆ† (Split)", d: (<span>å°‡ <Latex>{'\\frac{x-1}{x^2+4}'}</Latex> æ‹†ç‚ºå…©é …ç©åˆ†ã€‚</span>), m: "\\displaystyle \\int \\frac{1}{x} dx + \\int \\frac{x}{x^2+4} dx - \\int \\frac{1}{x^2+4} dx" },
                        { t: "Step 5: è¨ˆç®—çµæœ (Result)", d: (<span>åˆ†åˆ¥åˆ©ç”¨å°æ•¸èˆ‡åæ­£åˆ‡å…¬å¼ã€‚</span>), m: "\\displaystyle \\ln|x| + \\frac{1}{2}\\ln(x^2+4) - \\frac{1}{2}\\tan^{-1}\\left(\\frac{x}{2}\\right) + K" }
                    ]
                },
                {
                    id: 6, label: "Ex 6", title: "é…æ–¹æ³• (Completing Square) (P.512)",
                    math: "\\displaystyle \\int \\frac{4x^2-3x+2}{4x^2-4x+3} \\, dx",
                    steps: [
                        { t: "Step 1: é•·é™¤æ³• (Long Division)", d: (<span>åˆ†å­åˆ†æ¯åŒæ¬¡ï¼Œå…ˆé™¤ã€‚å•†ç‚º 1ã€‚</span>), m: "\\displaystyle \\frac{4x^2-3x+2}{4x^2-4x+3} = 1 + \\frac{x-1}{4x^2-4x+3}" },
                        { t: "Step 2: é…æ–¹ (Complete Square)", d: (<span>åˆ†æ¯ä¸å¯ç´„ï¼Œé€²è¡Œé…æ–¹ã€‚</span>), m: "\\displaystyle 4x^2-4x+3 = (2x-1)^2 + 2" },
                        { t: "Step 3: è®Šæ•¸ä»£æ› (Substitution)", d: (<span>ä»¤ <Latex>{'u=2x-1, du=2dx'}</Latex>ã€‚åˆ†å­ <Latex>{'x-1'}</Latex> è®Šç‚º <Latex>{'\\frac{u-1}{2}'}</Latex>ã€‚</span>), m: "\\displaystyle \\int \\frac{x-1}{(2x-1)^2+2} dx = \\frac{1}{2} \\int \\frac{u/2 - 1/2}{u^2+2} du = \\frac{1}{4} \\int \\frac{u-1}{u^2+2} du" },
                        { t: "Step 4: æ‹†è§£ç©åˆ† (Split)", d: (<span>æ‹†æˆ <Latex>{'\\frac{u}{u^2+2}'}</Latex> å’Œ <Latex>{'\\frac{1}{u^2+2}'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{1}{4} [\\frac{1}{2}\\ln(u^2+2) - \\frac{1}{\\sqrt{2}}\\tan^{-1}(\\frac{u}{\\sqrt{2}})]" },
                        { t: "Step 5: çµæœ (Result)", d: (<span>åˆä½µæ•´ç†ã€‚</span>), m: "\\displaystyle x + \\frac{1}{8}\\ln(4x^2-4x+3) - \\frac{1}{4\\sqrt{2}}\\tan^{-1}\\left(\\frac{2x-1}{\\sqrt{2}}\\right) + C" }
                    ]
                },
                {
                    id: 8, label: "Ex 8", title: "é‡æ ¹äºŒæ¬¡å› å¼ (Repeated Quadratic) (P.513)",
                    math: "\\displaystyle \\int \\frac{1-x+2x^2-x^3}{x(x^2+1)^2} \\, dx",
                    steps: [
                        { t: "Step 1: è¨­å®šæ¶æ§‹ (Setup)", d: (<span>åˆ†æ¯å«é‡æ ¹äºŒæ¬¡å› å¼ï¼Œéœ€è¨­å…©é …ã€‚</span>), m: "\\displaystyle \\frac{A}{x} + \\frac{Bx+C}{x^2+1} + \\frac{Dx+E}{(x^2+1)^2}" },
                        { t: "Step 2: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span>æ¯”è¼ƒä¿‚æ•¸æ³•ã€‚</span>), m: "\\displaystyle A=1, B=-1, C=-1, D=1, E=0" },
                        { t: "Step 3: å¯«å‡ºç©åˆ†å¼ (Write Integral)", d: (<span>ä»£å…¥ä¿‚æ•¸ã€‚</span>), m: "\\displaystyle \\int (\\frac{1}{x} - \\frac{x+1}{x^2+1} + \\frac{x}{(x^2+1)^2}) \\, dx" },
                        { t: "Step 4: é€é …ç©åˆ† (Integrate)", d: (<span><Latex>{'\\frac{x+1}{x^2+1}'}</Latex> æ‹†å…©é …ï¼›<Latex>{'\\frac{x}{(x^2+1)^2}'}</Latex> ç”¨ä»£æ›æ³•ã€‚</span>), m: "\\displaystyle \\ln|x| - (\\frac{1}{2}\\ln(x^2+1) + \\tan^{-1}x) + (-\\frac{1}{2(x^2+1)}) + K" },
                        { t: "Step 5: çµæœ (Result)", d: (<span>æ•´ç†ã€‚</span>), m: "\\displaystyle \\ln|x| - \\frac{1}{2}\\ln(x^2+1) - \\tan^{-1}x - \\frac{1}{2(x^2+1)} + K" }
                    ]
                }
            ],
            en: [
                {
                    id: 1, label: "Ex 1", title: "Improper Fraction (P.507)",
                    math: "\\displaystyle \\int \\frac{x^3+x}{x-1} \\, dx",
                    steps: [
                        { t: "Step 1: Check Degree", d: (<span>Num degree (3) <Latex>{'\\ge'}</Latex> Denom degree (1). Improper fraction.</span>), m: "\\displaystyle \\text{Perform Long Division.}" },
                        { t: "Step 2: Long Division", d: (<span>Divide <Latex>{'x^3+x'}</Latex> by <Latex>{'x-1'}</Latex>.</span>), m: "\\displaystyle \\frac{x^3+x}{x-1} = x^2 + x + 2 + \\frac{2}{x-1}" },
                        { t: "Step 3: Integrate", d: (<span>Integrate term by term.</span>), m: "\\displaystyle \\int (x^2 + x + 2 + \\frac{2}{x-1}) \\, dx" },
                        { t: "Step 4: Result", d: (<span>Apply power rule and log rule.</span>), m: "\\displaystyle \\frac{1}{3}x^3 + \\frac{1}{2}x^2 + 2x + 2\\ln|x-1| + C" }
                    ]
                },
                {
                    id: 2, label: "Ex 2", title: "Distinct Linear Factors (P.508)",
                    math: "\\displaystyle \\int \\frac{x^2+2x-1}{2x^3+3x^2-2x} \\, dx",
                    steps: [
                        { t: "Step 1: Factor Denom", d: (<span>Factor out x and quadratic term.</span>), m: "\\displaystyle x(2x^2+3x-2) = x(2x-1)(x+2)" },
                        { t: "Step 2: Setup", d: (<span>Three distinct linear factors.</span>), m: "\\displaystyle \\frac{A}{x} + \\frac{B}{2x-1} + \\frac{C}{x+2}" },
                        { t: "Step 3: Solve Coeffs", d: (<span>Multiply by LCD and substitute roots.</span>), m: "\\displaystyle x=0 \\to A=1/2; \\quad x=1/2 \\to B=1/5; \\quad x=-2 \\to C=-1/10" },
                        { t: "Step 4: Integrate", d: (<span>Integrate each term. Watch the chain rule for <Latex>{'2x-1'}</Latex>.</span>), m: "\\displaystyle \\frac{1}{2}\\ln|x| + \\frac{1}{10}\\ln|2x-1| - \\frac{1}{10}\\ln|x+2| + K" }
                    ]
                },
                {
                    id: 4, label: "Ex 4", title: "Repeated Linear Factors (P.510)",
                    math: "\\displaystyle \\int \\frac{x^4-2x^2+4x+1}{x^3-x^2-x+1} \\, dx",
                    steps: [
                        { t: "Step 1: Long Division", d: (<span>Divide first.</span>), m: "\\displaystyle x+1 + \\frac{4x}{(x-1)^2(x+1)}" },
                        { t: "Step 2: Setup", d: (<span>Include <Latex>{'(x-1)'}</Latex> and <Latex>{'(x-1)^2'}</Latex>.</span>), m: "\\displaystyle \\frac{A}{x-1} + \\frac{B}{(x-1)^2} + \\frac{C}{x+1}" },
                        { t: "Step 3: Solve", d: (<span>Find coefficients.</span>), m: "\\displaystyle A=1, B=2, C=-1" },
                        { t: "Step 4: Integrate", d: (<span>Combine results.</span>), m: "\\displaystyle \\frac{x^2}{2} + x + \\ln|x-1| - \\frac{2}{x-1} - \\ln|x+1| + K" }
                    ]
                },
                {
                    id: 3, label: "Ex 5", title: "Irreducible Quadratic (P.511)",
                    math: "\\displaystyle \\int \\frac{2x^2-x+4}{x^3+4x} \\, dx",
                    steps: [
                        { t: "Step 1: Factor", d: (<span><Latex>{'x^2+4'}</Latex> cannot be factored further.</span>), m: "\\displaystyle x(x^2+4)" },
                        { t: "Step 2: Setup", d: (<span>Quadratic factor gets linear numerator.</span>), m: "\\displaystyle \\frac{A}{x} + \\frac{Bx+C}{x^2+4}" },
                        { t: "Step 3: Solve", d: (<span>Compare coefficients.</span>), m: "\\displaystyle A=1, \\quad B=1, \\quad C=-1" },
                        { t: "Step 4: Split Integral", d: (<span>Separate the quadratic part.</span>), m: "\\displaystyle \\int \\frac{1}{x} dx + \\int \\frac{x}{x^2+4} dx - \\int \\frac{1}{x^2+4} dx" },
                        { t: "Step 5: Result", d: (<span>Logarithm and Arctangent.</span>), m: "\\displaystyle \\ln|x| + \\frac{1}{2}\\ln(x^2+4) - \\frac{1}{2}\\tan^{-1}\\left(\\frac{x}{2}\\right) + K" }
                    ]
                },
                {
                    id: 5, label: "Ex 6", title: "Completing Square (P.512)",
                    math: "\\displaystyle \\int \\frac{4x^2-3x+2}{4x^2-4x+3} \\, dx",
                    steps: [
                        { t: "Step 1: Division", d: (<span>Result is 1.</span>), m: "\\displaystyle 1 + \\frac{x-1}{4x^2-4x+3}" },
                        { t: "Step 2: Complete Square", d: (<span>Denominator becomes.</span>), m: "\\displaystyle (2x-1)^2 + 2" },
                        { t: "Step 3: Substitution", d: (<span><Latex>{'u=2x-1'}</Latex>.</span>), m: "\\displaystyle \\frac{1}{4} \\int \\frac{u-1}{u^2+2} du" },
                        { t: "Step 4: Result", d: (<span>Integrate split parts.</span>), m: "\\displaystyle x + \\frac{1}{8}\\ln(4x^2-4x+3) - \\frac{1}{4\\sqrt{2}}\\tan^{-1}\\left(\\frac{2x-1}{\\sqrt{2}}\\right) + C" }
                    ]
                },
                {
                    id: 6, label: "Ex 8", title: "Repeated Quadratic (P.513)",
                    math: "\\displaystyle \\int \\frac{1-x+2x^2-x^3}{x(x^2+1)^2} \\, dx",
                    steps: [
                        { t: "Step 1: Setup", d: (<span>Repeated quadratic factor.</span>), m: "\\displaystyle \\frac{A}{x} + \\frac{Bx+C}{x^2+1} + \\frac{Dx+E}{(x^2+1)^2}" },
                        { t: "Step 2: Solve", d: (<span>Find coefficients.</span>), m: "\\displaystyle A=1, B=-1, C=-1, D=1, E=0" },
                        { t: "Step 3: Integrate", d: (<span>Term by term.</span>), m: "\\displaystyle \\ln|x| - \\frac{1}{2}\\ln(x^2+1) - \\tan^{-1}x - \\frac{1}{2(x^2+1)} + K" }
                    ]
                }
            ]
        };

        const PRACTICE_DATA = {
            zh: [
                { 
                    id: 1, label: "Q 1", title: "ç·´ç¿’é¡Œ 1 (Ref Ex 1)", math: "\\displaystyle \\int \\frac{x^2}{x+1} \\, dx", 
                    steps: [
                        { t: "Step 1: æª¢æŸ¥æ¬¡æ•¸ (Check Degree)", d: (<span>åˆ†å­æ¬¡æ•¸ (2) > åˆ†æ¯æ¬¡æ•¸ (1)ï¼Œç‚ºå‡åˆ†å¼ã€‚</span>), m: "\\displaystyle \\text{Degree } 2 > 1 \\implies \\text{Long Division}" },
                        { t: "Step 2: é•·é™¤æ³• (Long Division)", d: (<span><Latex>{'x^2 \\div (x+1) = x-1'}</Latex>ï¼Œé¤˜æ•¸ç‚º 1ã€‚</span>), m: "\\displaystyle \\frac{x^2}{x+1} = x - 1 + \\frac{1}{x+1}" },
                        { t: "Step 3: é‡å¯«èˆ‡ç©åˆ† (Rewrite & Integrate)", d: (<span>é€é …ç©åˆ†ã€‚</span>), m: "\\displaystyle \\int (x - 1 + \\frac{1}{x+1}) \\, dx" },
                        { t: "Step 4: çµæœ (Result)", d: (<span>å¤šé …å¼èˆ‡å°æ•¸ç©åˆ†ã€‚</span>), m: "\\displaystyle \\frac{1}{2}x^2 - x + \\ln|x+1| + C" }
                    ]
                },
                { 
                    id: 2, label: "Q 2", title: "ç·´ç¿’é¡Œ 2 (Ref Ex 2)", math: "\\displaystyle \\int \\frac{5x-3}{(x-1)(x-3)} \\, dx", 
                    steps: [
                        { t: "Step 1: è¨­å®šéƒ¨åˆ†åˆ†å¼ (Setup)", d: (<span>åˆ†æ¯å·²åˆ†è§£ç‚ºå…©å€‹ç›¸ç•°ç·šæ€§å› å­ã€‚</span>), m: "\\displaystyle \\frac{5x-3}{(x-1)(x-3)} = \\frac{A}{x-1} + \\frac{B}{x-3}" },
                        { t: "Step 2: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span>é€šåˆ†å¾Œä»£å…¥ç‰¹æ®Šå€¼ã€‚ä»¤ <Latex>{'x=1 \\to A=-1'}</Latex>ã€‚ä»¤ <Latex>{'x=3 \\to B=6'}</Latex>ã€‚</span>), m: "\\displaystyle 5x-3 = A(x-3) + B(x-1) \\implies A=-1, \\quad B=6" },
                        { t: "Step 3: ç©åˆ† (Integrate)", d: (<span>ä»£å›ä¿‚æ•¸ä¸¦ç©åˆ†ã€‚</span>), m: "\\displaystyle \\int \\left( \\frac{-1}{x-1} + \\frac{6}{x-3} \\right) \\, dx" },
                        { t: "Step 4: çµæœ (Result)", d: (<span>å°æ•¸å½¢å¼ã€‚</span>), m: "\\displaystyle -\\ln|x-1| + 6\\ln|x-3| + C" }
                    ]
                },
                { 
                    id: 3, label: "Q 3", title: "ç·´ç¿’é¡Œ 3 (Ref Ex 4)", math: "\\displaystyle \\int \\frac{x}{(x-1)^2} \\, dx", 
                    steps: [
                        { t: "Step 1: è¨­å®šæ¶æ§‹ (Case II)", d: (<span>é‡æ ¹ <Latex>{'(x-1)^2'}</Latex> éœ€åŒ…å«ä¸€æ¬¡æ–¹èˆ‡äºŒæ¬¡æ–¹é …ã€‚</span>), m: "\\displaystyle \\frac{x}{(x-1)^2} = \\frac{A}{x-1} + \\frac{B}{(x-1)^2}" },
                        { t: "Step 2: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span>é€šåˆ†ï¼š<Latex>{'x = A(x-1) + B'}</Latex>ã€‚ä»£å…¥ <Latex>{'x=1 \\to B=1'}</Latex>ã€‚æ¯”è¼ƒä¿‚æ•¸ <Latex>{'A=1'}</Latex>ã€‚</span>), m: "\\displaystyle A=1, \\quad B=1" },
                        { t: "Step 3: é‡å¯«ç©åˆ† (Rewrite)", d: (<span>ä»£å›ä¿‚æ•¸ã€‚</span>), m: "\\displaystyle \\int \\left( \\frac{1}{x-1} + \\frac{1}{(x-1)^2} \\right) \\, dx" },
                        { t: "Step 4: çµæœ (Result)", d: (<span><Latex>{'1/u^2'}</Latex> çš„ç©åˆ†ç‚º <Latex>{'-1/u'}</Latex>ã€‚</span>), m: "\\displaystyle \\ln|x-1| - \\frac{1}{x-1} + C" }
                    ]
                },
                { 
                    id: 4, label: "Q 4", title: "ç·´ç¿’é¡Œ 4 (Ref Ex 5)", math: "\\displaystyle \\int \\frac{1}{x(x^2+1)} \\, dx", 
                    steps: [
                        { t: "Step 1: è¨­å®šæ¶æ§‹ (Case III)", d: (<span><Latex>{'x^2+1'}</Latex> ç‚ºä¸å¯ç´„äºŒæ¬¡ï¼Œåˆ†å­è¨­ <Latex>{'Bx+C'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{1}{x(x^2+1)} = \\frac{A}{x} + \\frac{Bx+C}{x^2+1}" },
                        { t: "Step 2: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span><Latex>{'1 = A(x^2+1) + (Bx+C)x'}</Latex>ã€‚ä»£å…¥ <Latex>{'x=0 \\to A=1'}</Latex>ã€‚æ¯”è¼ƒ <Latex>{'x^2'}</Latex> ä¿‚æ•¸ <Latex>{'0=A+B \\to B=-1'}</Latex>ã€‚æ¯”è¼ƒ <Latex>{'x'}</Latex> ä¿‚æ•¸ <Latex>{'C=0'}</Latex>ã€‚</span>), m: "\\displaystyle A=1, \\quad B=-1, \\quad C=0" },
                        { t: "Step 3: é‡å¯«ç©åˆ† (Rewrite)", d: (<span>æ‹†è§£ç‚ºå…©é …ã€‚</span>), m: "\\displaystyle \\int \\left( \\frac{1}{x} - \\frac{x}{x^2+1} \\right) \\, dx" },
                        { t: "Step 4: çµæœ (Result)", d: (<span>ç¬¬äºŒé …ç”¨ä»£æ›æ³• <Latex>{'u=x^2+1'}</Latex>ã€‚</span>), m: "\\displaystyle \\ln|x| - \\frac{1}{2}\\ln(x^2+1) + C" }
                    ]
                },
                { 
                    id: 5, label: "Q 5", title: "ç·´ç¿’é¡Œ 5 (Ref Ex 6)", math: "\\displaystyle \\int \\frac{x^2}{x^2-2x+5} \\, dx", 
                    steps: [
                        { t: "Step 1: é•·é™¤æ³• (Long Division)", d: (<span>åˆ†å­åˆ†æ¯åŒæ¬¡ã€‚é™¤æ³•å¾—å•† 1ï¼Œé¤˜å¼ <Latex>{'2x-5'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{x^2}{x^2-2x+5} = 1 + \\frac{2x-5}{x^2-2x+5}" },
                        { t: "Step 2: é…æ–¹ (Complete Square)", d: (<span>åˆ†æ¯é…æ–¹ã€‚</span>), m: "\\displaystyle x^2-2x+5 = (x-1)^2 + 4" },
                        { t: "Step 3: æ‹†è§£åˆ†å­ (Split Numerator)", d: (<span>å°‡ <Latex>{'2x-5'}</Latex> æ¹Šæˆ <Latex>{'2(x-1) - 3'}</Latex> ä»¥ä¾¿ç©åˆ†ã€‚</span>), m: "\\displaystyle \\int 1 dx + \\int \\frac{2(x-1)}{(x-1)^2+4} dx - \\int \\frac{3}{(x-1)^2+4} dx" },
                        { t: "Step 4: ç©åˆ† (Integrate)", d: (<span>åˆ†åˆ¥ç‚ºï¼šå¸¸æ•¸ã€å°æ•¸ã€åæ­£åˆ‡ã€‚</span>), m: "\\displaystyle x + \\ln(x^2-2x+5) - \\frac{3}{2}\\tan^{-1}\\left(\\frac{x-1}{2}\\right) + C" }
                    ]
                },
                { 
                    id: 6, label: "Q 6", title: "ç·´ç¿’é¡Œ 6 (Ref Ex 8)", math: "\\displaystyle \\int \\frac{x^2}{(x^2+1)^2} \\, dx", 
                    steps: [
                        { t: "Step 1: è¨­å®šæ¶æ§‹ (Case IV)", d: (<span>é‡æ ¹äºŒæ¬¡å› å¼ã€‚</span>), m: "\\displaystyle \\frac{Ax+B}{x^2+1} + \\frac{Cx+D}{(x^2+1)^2}" },
                        { t: "Step 2: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span>è§£å¾— <Latex>{'A=0, B=1, C=0, D=-1'}</Latex>ã€‚</span>), m: "\\displaystyle \\frac{1}{x^2+1} - \\frac{1}{(x^2+1)^2}" },
                        { t: "Step 3: ç©åˆ†ç¬¬ä¸€é … (Integrate 1)", d: (<span>åŸºæœ¬å…¬å¼ã€‚</span>), m: "\\displaystyle \\tan^{-1}x" },
                        { t: "Step 4: ç©åˆ†ç¬¬äºŒé … (Integrate 2)", d: (<span>éœ€ä½¿ç”¨ä¸‰è§’ä»£æ› <Latex>{'x=\\tan\\theta'}</Latex>ï¼Œå¾— <Latex>{'\\frac{1}{2}x + \\frac{1}{2}\\sin x \\cos x'}</Latex> å½¢å¼ï¼Œæˆ–åˆ©ç”¨éè¿´å…¬å¼ã€‚æœ€çµ‚çµæœå¦‚ä¸‹ï¼š</span>), m: "\\displaystyle \\frac{1}{2}\\tan^{-1}x - \\frac{x}{2(x^2+1)} + C" }
                    ]
                },
                { 
                    id: 7, label: "Q 7", title: "ç·´ç¿’é¡Œ 2 (Ref Ex 2)", math: "\\displaystyle \\int \\frac{1}{x^2-1} \\, dx", 
                    steps: [
                        { t: "Step 1: å› å¼åˆ†è§£ (Factor)", d: (<span>å¹³æ–¹å·®å…¬å¼ã€‚</span>), m: "\\displaystyle x^2-1 = (x-1)(x+1)" },
                        { t: "Step 2: è¨­å®šéƒ¨åˆ†åˆ†å¼ (Setup)", d: (<span>å…©å€‹ç›¸ç•°ç·šæ€§å› å­ã€‚</span>), m: "\\displaystyle \\frac{1}{(x-1)(x+1)} = \\frac{A}{x-1} + \\frac{B}{x+1}" },
                        { t: "Step 3: æ±‚è§£ä¿‚æ•¸ (Solve)", d: (<span>ä»£å…¥ <Latex>{'x=1, x=-1'}</Latex>ã€‚</span>), m: "\\displaystyle 1 = A(x+1) + B(x-1) \\implies A=1/2, B=-1/2" },
                        { t: "Step 4: ç©åˆ† (Integrate)", d: (<span>ä»£å…¥ä¸¦ç©åˆ†ã€‚</span>), m: "\\displaystyle \\frac{1}{2}\\ln|x-1| - \\frac{1}{2}\\ln|x+1| + C = \\frac{1}{2}\\ln\\left|\\frac{x-1}{x+1}\\right| + C" }
                    ]
                }
            ],
            en: [
                { 
                    id: 1, label: "Q 1", title: "Practice 1 (Ref Ex 1)", math: "\\displaystyle \\int \\frac{x^2}{x+1} \\, dx", 
                    steps: [
                        { t: "Step 1: Check Degree", d: (<span>Degree 2 > 1, Improper fraction.</span>), m: "\\displaystyle \\text{Perform Long Division.}" },
                        { t: "Step 2: Long Division", d: (<span>Divide to get polynomial + remainder.</span>), m: "\\displaystyle \\frac{x^2}{x+1} = x - 1 + \\frac{1}{x+1}" },
                        { t: "Step 3: Rewrite", d: (<span>Setup integral.</span>), m: "\\displaystyle \\int (x - 1 + \\frac{1}{x+1}) \\, dx" },
                        { t: "Step 4: Result", d: (<span>Integrate term by term.</span>), m: "\\displaystyle \\frac{1}{2}x^2 - x + \\ln|x+1| + C" }
                    ]
                },
                { 
                    id: 2, label: "Q 2", title: "Practice 2 (Ref Ex 2)", math: "\\displaystyle \\int \\frac{5x-3}{(x-1)(x-3)} \\, dx", 
                    steps: [
                        { t: "Step 1: Setup", d: (<span>Already factored.</span>), m: "\\displaystyle \\frac{5x-3}{(x-1)(x-3)} = \\frac{A}{x-1} + \\frac{B}{x-3}" },
                        { t: "Step 2: Solve", d: (<span>Substitute x=1, x=3.</span>), m: "\\displaystyle A=-1, \\quad B=6" },
                        { t: "Step 3: Integrate", d: (<span>Logarithmic integration.</span>), m: "\\displaystyle -\\ln|x-1| + 6\\ln|x-3| + C" }
                    ]
                },
                { 
                    id: 3, label: "Q 3", title: "Practice 3 (Ref Ex 4)", math: "\\displaystyle \\int \\frac{x}{(x-1)^2} \\, dx", 
                    steps: [
                        { t: "Step 1: Setup", d: (<span>Case II Repeated Linear.</span>), m: "\\displaystyle \\frac{x}{(x-1)^2} = \\frac{A}{x-1} + \\frac{B}{(x-1)^2}" },
                        { t: "Step 2: Solve", d: (<span>Find coefficients.</span>), m: "\\displaystyle A=1, \\quad B=1" },
                        { t: "Step 3: Rewrite", d: (<span>Prepare for integration.</span>), m: "\\displaystyle \\int (\\frac{1}{x-1} + (x-1)^{-2}) \\, dx" },
                        { t: "Step 4: Result", d: (<span>Power rule for second term.</span>), m: "\\displaystyle \\ln|x-1| - \\frac{1}{x-1} + C" }
                    ]
                },
                { 
                    id: 4, label: "Q 4", title: "Practice 4 (Ref Ex 5)", math: "\\displaystyle \\int \\frac{1}{x(x^2+1)} \\, dx", 
                    steps: [
                        { t: "Step 1: Setup", d: (<span>Case III Irreducible Quadratic.</span>), m: "\\displaystyle \\frac{1}{x(x^2+1)} = \\frac{A}{x} + \\frac{Bx+C}{x^2+1}" },
                        { t: "Step 2: Solve", d: (<span>Compare coefficients.</span>), m: "\\displaystyle A=1, \\quad B=-1, \\quad C=0" },
                        { t: "Step 3: Split", d: (<span>Two integrals.</span>), m: "\\displaystyle \\int \\frac{1}{x} dx - \\int \\frac{x}{x^2+1} dx" },
                        { t: "Step 4: Result", d: (<span>u-sub for second part.</span>), m: "\\displaystyle \\ln|x| - \\frac{1}{2}\\ln(x^2+1) + C" }
                    ]
                },
                { 
                    id: 5, label: "Q 5", title: "Practice 5 (Ref Ex 6)", math: "\\displaystyle \\int \\frac{x^2}{x^2-2x+5} \\, dx", 
                    steps: [
                        { t: "Step 1: Long Division", d: (<span>Degree 2 = 2. Divide first.</span>), m: "\\displaystyle 1 + \\frac{2x-5}{x^2-2x+5}" },
                        { t: "Step 2: Complete Square", d: (<span>Denominator.</span>), m: "\\displaystyle (x-1)^2+4" },
                        { t: "Step 3: Split Numerator", d: (<span>Match u-sub and arctan forms.</span>), m: "\\displaystyle \\int 1 dx + \\int \\frac{2(x-1)}{(x-1)^2+4} dx - \\int \\frac{3}{(x-1)^2+4} dx" },
                        { t: "Step 4: Result", d: (<span>Combine results.</span>), m: "\\displaystyle x + \\ln(x^2-2x+5) - \\frac{3}{2}\\tan^{-1}\\left(\\frac{x-1}{2}\\right) + C" }
                    ]
                },
                { 
                    id: 6, label: "Q 6", title: "Practice 6 (Ref Ex 8)", math: "\\displaystyle \\int \\frac{x^2}{(x^2+1)^2} \\, dx", 
                    steps: [
                        { t: "Step 1: Setup", d: (<span>Case IV Repeated Quadratic.</span>), m: "\\displaystyle \\frac{Ax+B}{x^2+1} + \\frac{Cx+D}{(x^2+1)^2}" },
                        { t: "Step 2: Solve", d: (<span>Coefficients found.</span>), m: "\\displaystyle \\frac{1}{x^2+1} - \\frac{1}{(x^2+1)^2}" },
                        { t: "Step 3: Integrate", d: (<span>Using trig sub or reduction formula for 2nd term.</span>), m: "\\displaystyle \\frac{1}{2}\\tan^{-1}x - \\frac{x}{2(x^2+1)} + C" }
                    ]
                },
                { 
                    id: 7, label: "Q 7", title: "Practice 2 (Ref Ex 2)", math: "\\displaystyle \\int \\frac{1}{x^2-1} \\, dx", 
                    steps: [
                        { t: "Step 1: Factor", d: (<span>Difference of squares.</span>), m: "\\displaystyle x^2-1 = (x-1)(x+1)" },
                        { t: "Step 2: Setup", d: (<span>Partial fractions.</span>), m: "\\displaystyle \\frac{1}{(x-1)(x+1)} = \\frac{A}{x-1} + \\frac{B}{x+1}" },
                        { t: "Step 3: Solve", d: (<span>Find A and B.</span>), m: "\\displaystyle A=1/2, \\quad B=-1/2" },
                        { t: "Step 4: Integrate", d: (<span>Result.</span>), m: "\\displaystyle \\frac{1}{2}\\ln|x-1| - \\frac{1}{2}\\ln|x+1| + C" }
                    ]
                }
            ]
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>