<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®ç©åˆ† (2) - 7.8 ç‘•ç©åˆ† | Prof. Wu Wen-Chuan</title>
    
    <!-- 1. æ ¸å¿ƒæ¨£å¼èˆ‡åº«è¼‰å…¥ -->
    <!-- Tailwind CSS (æ¨£å¼æ¡†æ¶) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (å‰ç«¯æ¡†æ¶) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (JSX ç·¨è­¯å™¨) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- KaTeX (æ•¸å­¸å…¬å¼æ¸²æŸ“) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    
    <!-- è‡ªå®šç¾©æ¨£å¼ -->
    <style>
        /* å¹³æ»‘æ»¾å‹• */
        html { scroll-behavior: smooth; }
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #fdf2f8; }
        ::-webkit-scrollbar-thumb { background: #fbcfe8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #f472b6; }
        /* æ•¸å­¸å…¬å¼å®¹å™¨æ¨£å¼ - å…è¨±æ°´å¹³æ»¾å‹• */
        .math-display { overflow-x: auto; overflow-y: hidden; }
    </style>
</head>
<body class="bg-yellow-50 font-sans text-gray-800 selection:bg-pink-200">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // 2. å·¥å…·çµ„ä»¶ (Utilities)
        // ==========================================

        /**
         * LaTeX æ¸²æŸ“çµ„ä»¶
         */
        const Latex = ({ children, block = false, fontSize = '0.9em' }) => {
            const spanRef = useRef(null);

            useEffect(() => {
                if (window.katex && spanRef.current) {
                    try {
                        const content = typeof children === 'string' ? children : '';
                        window.katex.render(content, spanRef.current, {
                            throwOnError: false,
                            displayMode: block,
                        });
                    } catch (e) {
                        console.warn("KaTeX render error", e);
                        if (spanRef.current) spanRef.current.innerText = String(children);
                    }
                }
            }, [children, block]);

            return <span ref={spanRef} style={{ margin: '0 4px', display: block ? 'block' : 'inline-block', fontSize: fontSize }} />;
        };

        // ==========================================
        // 3. UI å­çµ„ä»¶ (Sub-components)
        // ==========================================

        const Navbar = ({ t, isMenuOpen, setIsMenuOpen, toggleLang }) => {
            return (
                <nav className="sticky top-0 z-50 w-full bg-white/90 px-6 py-4 shadow-md backdrop-blur-md transition-all">
                    <div className="flex items-center justify-between max-w-7xl mx-auto">
                        <div className="flex flex-col">
                            <h1 className="bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-2xl font-black tracking-tight text-transparent md:text-3xl">
                                {t.title}
                            </h1>
                            <span className="text-base font-medium text-gray-500 md:text-xl">
                                {t.teacher}
                            </span>
                        </div>

                        <div className="hidden items-center gap-6 md:flex">
                            {t.menu.map((item, i) => (
                                <a key={i} href={`#part${i+1}`} className="text-xl font-bold text-gray-600 hover:text-pink-500 transition-colors">{item}</a>
                            ))}
                            <button 
                                onClick={toggleLang}
                                className="flex items-center gap-2 rounded-full bg-purple-100 px-5 py-2 text-lg font-bold text-purple-700 transition-all hover:bg-purple-200 hover:shadow-md active:scale-95"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                {t.langBtn}
                            </button>
                        </div>

                        <button 
                            className="rounded-full bg-gray-100 p-2 text-gray-600 md:hidden hover:bg-gray-200"
                            onClick={() => setIsMenuOpen(!isMenuOpen)}
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
                        </button>
                    </div>

                    {isMenuOpen && (
                        <div className="mt-4 flex flex-col gap-4 border-t border-gray-100 pt-4 md:hidden">
                            {t.menu.map((item, i) => (
                                <a key={i} href={`#part${i+1}`} onClick={() => setIsMenuOpen(false)} className="px-2 py-1 text-lg font-bold text-gray-600">{item}</a>
                            ))}
                            <button 
                                onClick={() => { toggleLang(); setIsMenuOpen(false); }}
                                className="flex w-full items-center justify-center gap-2 rounded-xl bg-purple-100 py-3 font-bold text-purple-700"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                {t.langBtn}
                            </button>
                        </div>
                    )}
                </nav>
            );
        };

        const UnitHeader = ({ t }) => (
            <div className="mb-8 text-center animate-in fade-in zoom-in duration-500">
                <h2 className="mb-2 text-4xl font-black text-black md:text-5xl">
                    <span className="mr-3 text-black">{t.unitId}</span>
                    {t.unitTitle}
                </h2>
                <p className="text-2xl font-bold text-gray-500">{t.unitSub}</p>
            </div>
        );

        const Part1 = ({ t }) => (
            <section id="part1" className="scroll-mt-32 rounded-[2rem] bg-pink-100 p-8 shadow-lg shadow-pink-100/50 md:p-12 transition-all hover:shadow-xl">
                <div className="mb-6 flex items-center gap-3">
                    <div className="flex h-12 w-12 items-center justify-center rounded-full bg-white text-pink-500 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                    </div>
                    <h2 className="text-2xl font-black text-pink-700 md:text-3xl">{t.part1Title}</h2>
                </div>
                
                <div className="space-y-8 rounded-3xl bg-white/60 p-6 md:p-8">
                    <h3 className="text-2xl font-bold text-gray-800">{t.part1Topic}</h3>
                    <div className="text-xl leading-relaxed text-gray-700">{t.part1Desc}</div>

                    {/* è§€å¿µé¡æ¯”å€å¡Š */}
                    <div className="bg-purple-50 py-4 px-6 rounded-2xl border-l-8 border-purple-400">
                        <h4 className="font-bold text-purple-800 text-xl mb-2 flex items-center gap-2">
                            <span>ğŸ’¡</span> {t.analogyTitle}
                        </h4>
                        <div className="text-xl text-gray-700 leading-relaxed">
                            {t.analogyDesc}
                        </div>
                    </div>
                    
                    {/* Process Block */}
                    <div className="bg-pink-50 py-4 px-6 rounded-2xl border-l-8 border-pink-400">
                        <h4 className="font-bold text-pink-800 text-xl mb-2">{t.processTitle}</h4>
                        <ul className="list-decimal pl-6 space-y-3 text-xl text-gray-700">
                            <li>
                                <span className="font-bold">æ”¶æ–‚ (Convergent):</span> {t.processStep1}
                            </li>
                            <li>
                                <span className="font-bold">ç™¼æ•£ (Divergent):</span> {t.processStep2}
                            </li>
                        </ul>
                    </div>

                    {/* Cases Block */}
                    <div className="bg-white p-6 rounded-2xl border-l-8 border-pink-400 shadow-sm">
                        <h4 className="font-bold text-pink-800 text-xl mb-4">{t.casesTitle}</h4>
                        <ul className="space-y-4 text-lg text-gray-700">
                            <li>
                                <span className="font-bold">{t.case1}</span> 
                                <span className="ml-2"><Latex fontSize="0.9em">{'\\displaystyle \\int_a^\\infty f(x) dx = \\lim_{t \\to \\infty} \\int_a^t f(x) dx'}</Latex></span>
                            </li>
                            <li>
                                <span className="font-bold">{t.case2}</span> 
                                <span className="ml-2"><Latex fontSize="0.9em">{'\\displaystyle \\int_a^b f(x) dx = \\lim_{t \\to b^-} \\int_a^t f(x) dx'}</Latex></span>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
        );

        const Part2 = ({ t, activeExList, activeExampleId, setActiveExampleId }) => {
            const activeEx = activeExList.find(e => e.id === activeExampleId) || activeExList[0];
            return (
                <section id="part2" className="scroll-mt-32 rounded-[2rem] bg-blue-100 p-8 shadow-lg shadow-blue-100/50 md:p-12 transition-all hover:shadow-xl">
                    <div className="mb-6 flex items-center gap-3">
                        <div className="flex h-12 w-12 items-center justify-center rounded-full bg-white text-blue-500 shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
                        </div>
                        <h2 className="text-2xl font-black text-blue-700 md:text-3xl">{t.part2Title}</h2>
                    </div>

                    <div className="mb-8 flex flex-wrap gap-3">
                        {activeExList.map((ex) => (
                            <button
                                key={ex.id}
                                onClick={() => setActiveExampleId(ex.id)}
                                className={`rounded-full px-6 py-3 text-lg font-bold transition-all shadow-sm ${
                                    activeExampleId === ex.id
                                        ? "bg-blue-600 text-white shadow-lg shadow-blue-500/30 scale-105"
                                        : "bg-white text-blue-600 hover:bg-blue-50 hover:scale-105"
                                }`}
                            >
                                {t.btnLabel} {ex.id}
                            </button>
                        ))}
                    </div>

                    <div className="space-y-8">
                        <div key={activeEx.id} className="rounded-3xl bg-white/60 p-6 md:p-8 shadow-inner">
                            <div className="border-b-2 border-blue-200 pb-6 mb-6">
                                <h3 className="text-2xl font-bold text-blue-800 mb-3">{activeEx.title}</h3>
                                <div className="flex flex-wrap items-center gap-4 text-lg font-bold text-gray-800">
                                    <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-lg">{t.btnLabel} {activeEx.id}:</span>
                                    <div className="rounded-xl bg-white px-6 py-3 text-blue-600 shadow-md ring-1 ring-blue-100 math-display">
                                        <Latex block fontSize="0.9em">{activeEx.math}</Latex>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-6">
                                {activeEx.steps.map((step, idx) => (
                                    <div key={idx} className="group rounded-2xl bg-white p-6 ring-2 ring-blue-200 transition-all hover:shadow-lg hover:ring-blue-400">
                                        <h4 className="mb-3 flex items-center gap-3 text-lg font-bold text-blue-700">
                                            <span className="flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-sm text-white font-black">
                                                {idx + 1}
                                            </span>
                                            {step.t}
                                        </h4>
                                        <div className="mb-4 text-lg text-gray-600 pl-11">{step.d}</div>
                                        <div className="bg-blue-50 p-4 text-center text-lg font-bold text-blue-900 rounded-xl math-display border border-blue-100">
                                            <Latex block fontSize="0.9em">{step.m}</Latex>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const Part3 = ({ t, activePracList, activePracticeId, setActivePracticeId }) => {
            const activePrac = activePracList.find(p => p.id === activePracticeId) || activePracList[0];
            return (
                <section id="part3" className="scroll-mt-32 rounded-[2rem] bg-green-100 p-8 shadow-lg shadow-green-100/50 md:p-12 transition-all hover:shadow-xl">
                    <div className="flex items-center gap-3 mb-6">
                        <div className="flex h-12 w-12 items-center justify-center rounded-full bg-white text-green-500 shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
                        </div>
                        <h2 className="text-2xl font-black text-green-700 md:text-3xl">{t.part3Title}</h2>
                    </div>

                    <div className="mb-8 flex flex-wrap gap-3">
                        {activePracList.map((p) => (
                            <button
                                key={p.id}
                                onClick={() => setActivePracticeId(p.id)}
                                className={`rounded-full px-6 py-3 text-lg font-bold transition-all shadow-sm ${
                                    activePracticeId === p.id
                                        ? "bg-green-600 text-white shadow-lg shadow-green-500/30 scale-105"
                                        : "bg-white text-green-600 hover:bg-green-50 hover:scale-105"
                                }`}
                            >
                                {t.btnPracticeLabel} {p.id}
                            </button>
                        ))}
                    </div>

                    <div className="mt-4 rounded-3xl bg-white/60 p-6 md:p-8">
                        <p className="mb-8 text-xl text-gray-700 font-medium">{t.part3Desc}</p>
                        
                        <div key={activePrac.id} className="rounded-3xl bg-white p-6 md:p-8 shadow-md border-2 border-green-300 animate-in fade-in slide-in-from-bottom-4 duration-300">
                            <div className="border-b-2 border-green-100 pb-6 mb-6">
                                <h3 className="text-2xl font-bold text-green-800 mb-3">{activePrac.title}</h3>
                                <div className="flex flex-wrap items-center gap-4 text-lg font-bold text-gray-800">
                                    <span className="bg-green-100 text-green-800 px-3 py-1 rounded-lg">{t.btnPracticeLabel} {activePrac.id}:</span>
                                    <div className="rounded-xl bg-white px-6 py-3 text-green-700 shadow-md ring-1 ring-green-100 math-display">
                                        <Latex block fontSize="0.9em">{activePrac.math}</Latex>
                                    </div>
                                </div>
                            </div>

                            <div className="mt-6 space-y-6">
                                {activePrac.steps.map((step, idx) => (
                                    <div key={idx} className="group rounded-2xl bg-white p-6 ring-2 ring-green-200 transition-all hover:shadow-lg hover:ring-green-400">
                                        <h4 className="mb-3 flex items-center gap-3 text-lg font-bold text-green-600">
                                            <span className="flex h-8 w-8 items-center justify-center rounded-full bg-green-600 text-sm text-white font-black">
                                                {idx + 1}
                                            </span>
                                            {step.t}
                                        </h4>
                                        <div className="mb-4 text-lg text-gray-600 pl-11">{step.d}</div>
                                        <div className="bg-green-50 p-4 text-center text-lg font-bold text-green-800 rounded-xl math-display border border-green-100">
                                            <Latex block fontSize="0.9em">{step.m}</Latex>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const App = () => {
            const [lang, setLang] = useState('zh');
            const [katexLoaded, setKatexLoaded] = useState(false);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [activeExampleId, setActiveExampleId] = useState(1);
            const [activePracticeId, setActivePracticeId] = useState(1);

            useEffect(() => {
                const checkKatex = setInterval(() => {
                    if (window.katex) {
                        setKatexLoaded(true);
                        clearInterval(checkKatex);
                    }
                }, 100);
                setTimeout(() => setKatexLoaded(true), 3000); 
                return () => clearInterval(checkKatex);
            }, []);

            const toggleLang = () => {
                setLang(prev => prev === 'zh' ? 'en' : 'zh');
                setIsMenuOpen(false);
            };

            const t = DATA[lang];
            const activeExList = EXAMPLES_DATA[lang];
            const activePracList = PRACTICE_DATA[lang];

            if (!katexLoaded) {
                return (
                    <div className="flex h-screen w-full items-center justify-center bg-yellow-50 text-xl font-bold text-gray-500">
                        Loading Math Engine...
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-yellow-50 font-sans text-gray-800 selection:bg-pink-200">
                    <Navbar t={t} isMenuOpen={isMenuOpen} setIsMenuOpen={setIsMenuOpen} toggleLang={toggleLang} />
                    <main className="mx-auto mt-16 flex max-w-6xl flex-col gap-16 px-4 pb-20">
                        <UnitHeader t={t} />
                        <Part1 t={t} />
                        <Part2 t={t} activeExList={activeExList} activeExampleId={activeExampleId} setActiveExampleId={setActiveExampleId} />
                        <Part3 t={t} activePracList={activePracList} activePracticeId={activePracticeId} setActivePracticeId={setActivePracticeId} />
                    </main>
                    <footer className="mt-12 bg-white py-12 text-center text-gray-400 border-t border-gray-100">
                        <p className="text-lg">Â© 2025 Calculus (2) Course. Prof. Wu Wen-Chuan.</p>
                        <p className="mt-2 text-sm">Designed for Student Success</p>
                    </footer>
                </div>
            );
        };

        // ==========================================
        // 4. è³‡æ–™å®šç¾© (Data)
        // ==========================================

        const DATA = {
            zh: {
                title: "å¾®ç©åˆ† (2)",
                teacher: "æˆèª²è€å¸«: å³æ–‡éŠ“ (Prof. Wu Wen-Chuan)",
                menu: ["æ ¸å¿ƒæ¦‚å¿µ", "ç¯„ä¾‹èªªæ˜", "å‹•æ‰‹ç·´ç¿’"],
                langBtn: "English",
                unitId: "7.8",
                unitTitle: "ç‘•ç©åˆ†",
                unitSub: "Improper Integrals",
                part1Title: "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ ¸å¿ƒæ¦‚å¿µ",
                part1Topic: "ç‘•ç©åˆ†å®šç¾©èˆ‡åˆ¤åˆ¥",
                part1Desc: (
                    <span>
                        å®šç©åˆ† <Latex>{'\\int_a^b f(x) dx'}</Latex> é€šå¸¸è¦æ±‚å€é–“æœ‰é™ä¸”å‡½æ•¸é€£çºŒã€‚ç‘•ç©åˆ†å‰‡æ˜¯å°‡ç©åˆ†æ¨å»£åˆ°ã€Œç„¡çª®å€é–“ã€æˆ–ã€Œå‡½æ•¸æœ‰æ–·é»ã€çš„æƒ…å½¢ã€‚æˆ‘å€‘é€éæ¥µé™ (Limits) ä¾†è¨ˆç®—é€™é¡ç©åˆ†ã€‚
                    </span>
                ),
                analogyTitle: "è§€å¿µé¡æ¯”ï¼šæ°¸ä¸åœæ­¢çš„é¦¬æ‹‰æ¾",
                analogyDesc: (
                    <span>
                        ç‘•ç©åˆ†çš„ç¬¬ä¸€é¡ï¼ˆç„¡çª®å€é–“ï¼‰å°±åƒæ˜¯ä¸€å ´é¸æ‰‹æ°¸é åœ¨è·‘çš„é¦¬æ‹‰æ¾ã€‚é›–ç„¶è·¯å¾‘ç„¡é™å»¶ä¼¸ï¼Œä½†å¦‚æœé¸æ‰‹çš„é€Ÿåº¦æ…¢å¾—è¶³å¤ å¿«ï¼ˆå‡½æ•¸è¡°æ¸›æ¥µå¿«ï¼‰ï¼Œä»–æœ€çµ‚ã€Œç¸½å…±è·‘éçš„è·é›¢ã€ï¼ˆç©åˆ†å€¼ï¼‰å¯èƒ½è¶¨è¿‘æ–¼ä¸€å€‹å›ºå®šçš„æ•¸å€¼ï¼Œé€™å°±æ˜¯ã€Œæ”¶æ–‚ã€ã€‚
                    </span>
                ),
                processTitle: "é‡è¦è¡“èª (Terminology)",
                processStep1: "è‹¥æ¥µé™å­˜åœ¨ä¸”ç‚ºæœ‰é™æ•¸å€¼ï¼Œç©åˆ†æ”¶æ–‚ (Convergent)ã€‚",
                processStep2: "è‹¥æ¥µé™ä¸å­˜åœ¨æˆ–ç‚ºç„¡çª®å¤§ï¼Œç©åˆ†ç™¼æ•£ (Divergent)ã€‚",
                casesTitle: "ç©åˆ†å®šç¾© (Definitions)",
                case1: "ç¬¬ä¸€é¡ (ç„¡çª®å€é–“):",
                case2: "ç¬¬äºŒé¡ (ä¸é€£çºŒå‡½æ•¸):",
                part2Title: "ç¬¬äºŒéƒ¨åˆ†ï¼šç¯„ä¾‹èªªæ˜",
                part3Title: "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‹•æ‰‹ç·´ç¿’",
                part3Desc: "è«‹å˜—è©¦è§£æ±ºä»¥ä¸‹é¡Œç›®ï¼Œä¸¦åƒè€ƒè©³ç´°æ­¥é©Ÿæ ¸å°ï¼š",
                btnLabel: "ä¾‹é¡Œ",
                btnPracticeLabel: "ç·´ç¿’é¡Œ"
            },
            en: {
                title: "Calculus (2)",
                teacher: "Instructor: Prof. Wu Wen-Chuan",
                menu: ["Concepts", "Examples", "Practice"],
                langBtn: "ç¹é«”ä¸­æ–‡",
                unitId: "7.8",
                unitTitle: "Improper Integrals",
                unitSub: "ç‘•ç©åˆ†",
                part1Title: "Part 1: Core Concepts",
                part1Topic: "Definition & Convergence",
                part1Desc: (
                    <span>
                        Improper integrals extend the definite integral to infinite intervals or functions with infinite discontinuities. We evaluate them by taking limits.
                    </span>
                ),
                analogyTitle: "Analogy: The Never-Ending Marathon",
                analogyDesc: (
                    <span>
                        Type 1 improper integrals are like a marathon that never ends. Although the path is infinite, if the runner slows down fast enough (function decays quickly), the total distance covered might approach a finite value (Convergence).
                    </span>
                ),
                processTitle: "Terminology",
                processStep1: "Convergent: Limit exists and is finite.",
                processStep2: "Divergent: Limit does not exist or is infinite.",
                casesTitle: "Definitions",
                case1: "Type 1 (Infinite Intervals):",
                case2: "Type 2 (Discontinuous Integrands):",
                part2Title: "Part 2: Examples",
                part3Title: "Part 3: Practice",
                part3Desc: "Solve the problems and check the detailed steps below:",
                btnLabel: "Ex",
                btnPracticeLabel: "Q"
            }
        };

        const EXAMPLES_DATA = {
            zh: [
                {
                    id: 1, label: "Ex 1", title: "Type 1: p-ç´šæ•¸åˆ¤åˆ¥ (P.543)",
                    math: "\\displaystyle (a) \\int_1^\\infty \\frac{1}{x} \\, dx \\quad (b) \\int_1^\\infty \\frac{1}{x^2} \\, dx",
                    steps: [
                        { t: "Step 1: (a) å®šç¾©æ¥µé™èˆ‡ç©åˆ†", d: (<span>é‡å° (a) é¡Œï¼Œå°‡ä¸Šé™æ”¹ç‚º <Latex>{'t'}</Latex>ã€‚ç©åˆ† <Latex>{'1/x'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\int_1^t \\frac{1}{x} dx = \\lim_{t \\to \\infty} [\\ln|x|]_1^t" },
                        { t: "Step 2: (a) è¨ˆç®—çµæœ", d: (<span>ä»£å…¥é‚Šç•Œæ±‚æ¥µé™ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} (\\ln t - \\ln 1) = \\infty \\quad (\\text{Divergent ç™¼æ•£})" },
                        { t: "Step 3: (b) å®šç¾©æ¥µé™èˆ‡ç©åˆ†", d: (<span>é‡å° (b) é¡Œï¼Œç©åˆ† <Latex>{'x^{-2}'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\int_1^t x^{-2} dx = \\lim_{t \\to \\infty} [-\\frac{1}{x}]_1^t" },
                        { t: "Step 4: (b) è¨ˆç®—çµæœ", d: (<span>ä»£å…¥é‚Šç•Œæ±‚æ¥µé™ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} (-\\frac{1}{t} - (-1)) = 0 + 1 = 1 \\quad (\\text{Convergent æ”¶æ–‚})" },
                        { t: "Step 5: p-ç´šæ•¸çµè«–", d: (<span>ç¸½çµï¼šæ¬¡æ–¹ p=1 ç™¼æ•£ï¼Œp=2 æ”¶æ–‚ã€‚</span>), m: "\\displaystyle \\int_1^\\infty \\frac{1}{x^p} dx: \\quad p \\le 1 \\to \\text{Div}, \\quad p > 1 \\to \\text{Conv}" }
                    ]
                },
                {
                    id: 2, label: "Ex 2", title: "æŒ‡æ•¸å‡½æ•¸ç©åˆ† (P.544)",
                    math: "\\displaystyle \\int_{-\\infty}^0 x e^x \\, dx",
                    steps: [
                        { t: "Step 1: å¯«å‡ºæ¥µé™å¼ (Write Limit)", d: (<span>ä¸‹é™ç‚ºè² ç„¡çª®ã€‚</span>), m: "\\displaystyle \\lim_{t \\to -\\infty} \\int_t^0 x e^x \\, dx" },
                        { t: "Step 2: åˆ†éƒ¨ç©åˆ† (Integration by Parts)", d: (<span>ä»¤ <Latex>{'u=x, dv=e^x dx'}</Latex>ï¼Œå‰‡ <Latex>{'du=dx, v=e^x'}</Latex>ã€‚</span>), m: "\\displaystyle \\int x e^x dx = x e^x - \\int e^x dx = x e^x - e^x" },
                        { t: "Step 3: ä»£å…¥ä¸Šä¸‹é™ (Substitute)", d: (<span>ä»£å…¥ 0 èˆ‡ <Latex>{'t'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to -\\infty} [(0 - e^0) - (t e^t - e^t)] = -1 - \\lim_{t \\to -\\infty} (t e^t - e^t)" },
                        { t: "Step 4: ç¾…å¿…é”æ³•å‰‡ (L'Hopital)", d: (<span><Latex>{'t e^t'}</Latex> ç‚º <Latex>{'\\infty \\cdot 0'}</Latex> å‹ï¼Œæ”¹å¯«ç‚º <Latex>{'t/e^{-t}'}</Latex> ä¸¦å¾®åˆ†ã€‚</span>), m: "\\displaystyle \\lim_{t \\to -\\infty} \\frac{t}{e^{-t}} = \\lim_{t \\to -\\infty} \\frac{1}{-e^{-t}} = 0 \\implies -1 - (0-0) = -1" }
                    ]
                },
                {
                    id: 3, label: "Ex 3", title: "é›™é‚Šç„¡çª®ç©åˆ† (P.545)",
                    math: "\\displaystyle \\int_{-\\infty}^\\infty \\frac{1}{1+x^2} \\, dx",
                    steps: [
                        { t: "Step 1: æ‹†åˆ†ç©åˆ† (Split Integral)", d: (<span>é¸æ“‡ 0 å°‡å…¶æ‹†é–‹ã€‚</span>), m: "\\displaystyle \\int_{-\\infty}^0 \\frac{1}{1+x^2} dx + \\int_0^\\infty \\frac{1}{1+x^2} dx" },
                        { t: "Step 2: æ±‚å³åŠéƒ¨æ¥µé™ (Evaluate Right)", d: (<span>ç©åˆ†ç‚º <Latex>{'\\tan^{-1}x'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} [\\tan^{-1}x]_0^t = \\frac{\\pi}{2} - 0 = \\frac{\\pi}{2}" },
                        { t: "Step 3: æ±‚å·¦åŠéƒ¨æ¥µé™ (Evaluate Left)", d: (<span>åŒç†è¨ˆç®—å·¦å´ã€‚</span>), m: "\\displaystyle \\lim_{t \\to -\\infty} [\\tan^{-1}x]_t^0 = 0 - (-\\frac{\\pi}{2}) = \\frac{\\pi}{2}" },
                        { t: "Step 4: åŠ ç¸½ (Sum)", d: (<span>å…©éƒ¨åˆ†çš†æ”¶æ–‚ï¼Œæ•…å¯ç›¸åŠ ã€‚</span>), m: "\\displaystyle \\frac{\\pi}{2} + \\frac{\\pi}{2} = \\pi \\quad (\\text{Convergent})" }
                    ]
                },
                {
                    id: 4, label: "Ex 4", title: "p-ç´šæ•¸æ¸¬è©¦ (P.545)",
                    math: "\\displaystyle \\int_1^\\infty \\frac{1}{x^p} \\, dx",
                    steps: [
                        { t: "Step 1: åˆ†é¡è¨è«– (Cases)", d: (<span>å·²çŸ¥ <Latex>{'p=1'}</Latex> æ™‚ç™¼æ•£ (Ex 1)ã€‚è¨è«– <Latex>{'p \\ne 1'}</Latex>ã€‚</span>), m: "\\displaystyle \\int x^{-p} dx = \\frac{x^{-p+1}}{-p+1}" },
                        { t: "Step 2: ä»£å…¥æ¥µé™ (Substitute)", d: (<span>ä»£å…¥ <Latex>{'t'}</Latex> èˆ‡ 1ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\frac{1}{1-p} (t^{1-p} - 1)" },
                        { t: "Step 3: åˆ¤æ–· p > 1 (Case p > 1)", d: (<span>æ¬¡æ–¹ <Latex>{'1-p < 0'}</Latex>ï¼Œæ•… <Latex>{'t^{1-p} \\to 0'}</Latex>ã€‚</span>), m: "\\displaystyle \\text{Limit} = \\frac{-1}{1-p} = \\frac{1}{p-1} \\quad (\\text{Convergent})" },
                        { t: "Step 4: åˆ¤æ–· p < 1 (Case p < 1)", d: (<span>æ¬¡æ–¹ <Latex>{'1-p > 0'}</Latex>ï¼Œæ•… <Latex>{'t^{1-p} \\to \\infty'}</Latex>ã€‚</span>), m: "\\displaystyle \\text{Limit} = \\infty \\quad (\\text{Divergent})" }
                    ]
                },
                {
                    id: 7, label: "Ex 7", title: "ä¸é€£çºŒå‡½æ•¸ (P.547)",
                    math: "\\displaystyle \\int_0^3 \\frac{1}{x-1} \\, dx",
                    steps: [
                        { t: "Step 1: æª¢æŸ¥ä¸é€£çºŒé» (Check Discontinuity)", d: (<span>åˆ†æ¯åœ¨ <Latex>{'x=1'}</Latex> ç‚º 0ï¼Œä¸” 1 åœ¨å€é–“å…§ã€‚å¿…é ˆæ‹†åˆ†ã€‚</span>), m: "\\displaystyle \\int_0^1 \\frac{1}{x-1} dx + \\int_1^3 \\frac{1}{x-1} dx" },
                        { t: "Step 2: è¨ˆç®—ç¬¬ä¸€éƒ¨åˆ† (Evaluate Part 1)", d: (<span>å–å·¦æ¥µé™ <Latex>{'t \\to 1^-'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to 1^-} [\\ln|x-1|]_0^t = \\lim_{t \\to 1^-} (\\ln|t-1| - \\ln 1)" },
                        { t: "Step 3: çµè«– (Conclusion)", d: (<span>ç•¶ <Latex>{'t \\to 1'}</Latex>ï¼Œ<Latex>{'\\ln|t-1| \\to -\\infty'}</Latex>ã€‚åªè¦ä¸€éƒ¨åˆ†ç™¼æ•£ï¼Œæ•´é«”å³ç™¼æ•£ã€‚</span>), m: "\\displaystyle -\\infty \\implies \\text{Divergent}" }
                    ]
                },
                {
                    id: 8, label: "Ex 8", title: "å°æ•¸å‡½æ•¸ç©åˆ† (P.548)",
                    math: "\\displaystyle \\int_0^1 \\ln x \\, dx",
                    steps: [
                        { t: "Step 1: å¯«å‡ºæ¥µé™å¼ (Write Limit)", d: (<span><Latex>{'\\ln x'}</Latex> åœ¨ 0 è™•ä¸é€£çºŒã€‚å–å³æ¥µé™ã€‚</span>), m: "\\displaystyle \\lim_{t \\to 0^+} \\int_t^1 \\ln x \\, dx" },
                        { t: "Step 2: åˆ†éƒ¨ç©åˆ† (IBP)", d: (<span>ç©åˆ†å¾— <Latex>{'x\\ln x - x'}</Latex>ã€‚</span>), m: "\\displaystyle [x\\ln x - x]_t^1 = (1\\ln 1 - 1) - (t\\ln t - t) = -1 - (t\\ln t - t)" },
                        { t: "Step 3: ç¾…å¿…é”æ±‚æ¥µé™ (L'Hopital)", d: (<span><Latex>{'t\\ln t'}</Latex> ç‚º <Latex>{'0 \\cdot \\infty'}</Latex> å‹ã€‚</span>), m: "\\displaystyle \\lim_{t \\to 0^+} \\frac{\\ln t}{1/t} = \\lim \\frac{1/t}{-1/t^2} = \\lim (-t) = 0" },
                        { t: "Step 4: çµè«– (Conclusion)", d: (<span>ä»£å›è¨ˆç®—çµæœã€‚</span>), m: "\\displaystyle -1 - (0 - 0) = -1 \\quad (\\text{Convergent})" }
                    ]
                }
            ],
            en: [
                {
                    id: 1, label: "Ex 1", title: "Type 1: p-Series Test (P.543)",
                    math: "\\displaystyle (a) \\int_1^\\infty \\frac{1}{x} \\, dx \\quad (b) \\int_1^\\infty \\frac{1}{x^2} \\, dx",
                    steps: [
                        { t: "Step 1: (a) Setup & Integrate", d: (<span>For (a), integral is <Latex>{'\\ln|x|'}</Latex>.</span>), m: "\\displaystyle \\lim_{t \\to \\infty} [\\ln x]_1^t = \\lim_{t \\to \\infty} \\ln t" },
                        { t: "Step 2: (a) Result", d: (<span>Limit goes to infinity.</span>), m: "\\displaystyle \\infty \\quad (\\text{Divergent})" },
                        { t: "Step 3: (b) Setup & Integrate", d: (<span>For (b), integral is <Latex>{'-1/x'}</Latex>.</span>), m: "\\displaystyle \\lim_{t \\to \\infty} [-\\frac{1}{x}]_1^t = \\lim_{t \\to \\infty} (1 - \\frac{1}{t})" },
                        { t: "Step 4: (b) Result", d: (<span>Limit is 1.</span>), m: "\\displaystyle 1 \\quad (\\text{Convergent})" },
                        { t: "Step 5: Conclusion", d: (<span>p-series rule.</span>), m: "\\displaystyle p \\le 1 \\to \\text{Divergent}, \\quad p > 1 \\to \\text{Convergent}" }
                    ]
                },
                {
                    id: 2, label: "Ex 2", title: "Negative Infinity (P.544)",
                    math: "\\displaystyle \\int_{-\\infty}^0 x e^x \\, dx",
                    steps: [
                        { t: "Step 1: Write Limit", d: (<span>Replace lower negative infinity with t.</span>), m: "\\displaystyle \\lim_{t \\to -\\infty} \\int_t^0 x e^x \\, dx" },
                        { t: "Step 2: IBP", d: (<span>Integration by parts.</span>), m: "\\displaystyle [x e^x - e^x]_t^0" },
                        { t: "Step 3: Substitute", d: (<span>Plug in limits.</span>), m: "\\displaystyle (0 - 1) - (t e^t - e^t)" },
                        { t: "Step 4: L'Hopital", d: (<span>Limit of te^t is 0.</span>), m: "\\displaystyle -1 - 0 = -1 \\quad (\\text{Convergent})" }
                    ]
                },
                {
                    id: 3, label: "Ex 3", title: "Doubly Infinite (P.545)",
                    math: "\\displaystyle \\int_{-\\infty}^\\infty \\frac{1}{1+x^2} \\, dx",
                    steps: [
                        { t: "Step 1: Split", d: (<span>Split at 0.</span>), m: "\\displaystyle \\int_{-\\infty}^0 \\dots + \\int_0^\\infty \\dots" },
                        { t: "Step 2: Limits", d: (<span>Evaluate both sides.</span>), m: "\\displaystyle \\frac{\\pi}{2} + \\frac{\\pi}{2}" },
                        { t: "Step 3: Sum", d: (<span>Add results.</span>), m: "\\displaystyle \\pi \\quad (\\text{Convergent})" }
                    ]
                },
                {
                    id: 4, label: "Ex 4", title: "p-Series Test (P.545)",
                    math: "\\displaystyle \\int_1^\\infty \\frac{1}{x^p} \\, dx",
                    steps: [
                        { t: "Step 1: Cases", d: (<span>Consider p=1 (Divergent) and p!=1.</span>), m: "\\displaystyle \\text{If } p \\ne 1, \\text{ integral is } \\frac{x^{1-p}}{1-p}" },
                        { t: "Step 2: Limit p>1", d: (<span>Term goes to 0.</span>), m: "\\displaystyle \\frac{1}{p-1} \\quad (\\text{Convergent})" },
                        { t: "Step 3: Limit p<1", d: (<span>Term goes to infinity.</span>), m: "\\displaystyle \\infty \\quad (\\text{Divergent})" }
                    ]
                },
                {
                    id: 7, label: "Ex 7", title: "Discontinuous Integrand (P.547)",
                    math: "\\displaystyle \\int_0^3 \\frac{1}{x-1} \\, dx",
                    steps: [
                        { t: "Step 1: Identify Break", d: (<span>Discontinuous at x=1. Split.</span>), m: "\\displaystyle \\int_0^1 \\dots + \\int_1^3 \\dots" },
                        { t: "Step 2: Evaluate Part 1", d: (<span>Limit as t approaches 1 from left.</span>), m: "\\displaystyle \\lim_{t \\to 1^-} \\ln|t-1| = -\\infty" },
                        { t: "Step 3: Conclusion", d: (<span>Diverges.</span>), m: "\\displaystyle \\text{Divergent}" }
                    ]
                },
                {
                    id: 8, label: "Ex 8", title: "Logarithm at 0 (P.548)",
                    math: "\\displaystyle \\int_0^1 \\ln x \\, dx",
                    steps: [
                        { t: "Step 1: Write Limit", d: (<span>Limit as t approaches 0 from right.</span>), m: "\\displaystyle \\lim_{t \\to 0^+} \\int_t^1 \\ln x \\, dx" },
                        { t: "Step 2: IBP", d: (<span>Integrate.</span>), m: "\\displaystyle [x\\ln x - x]_t^1" },
                        { t: "Step 3: L'Hopital", d: (<span>Limit of tln(t) is 0.</span>), m: "\\displaystyle -1 - 0 = -1 \\quad (\\text{Convergent})" }
                    ]
                }
            ]
        };

        const PRACTICE_DATA = {
            zh: [
                { 
                    id: 1, label: "Q 1", title: "ç·´ç¿’é¡Œ 1 (Ref Ex 1)", math: "\\displaystyle \\int_1^\\infty \\frac{1}{x^3} \\, dx", 
                    steps: [
                        { t: "Step 1: å¯«å‡ºæ¥µé™å¼", d: (<span>Type 1 ç„¡çª®å€é–“ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\int_1^t x^{-3} \\, dx" },
                        { t: "Step 2: ç©åˆ†", d: (<span>ä½¿ç”¨å†ªæ¬¡æ³•å‰‡ <Latex>{'n=-3'}</Latex>ã€‚</span>), m: "\\displaystyle \\int x^{-3} dx = \\frac{x^{-2}}{-2} = -\\frac{1}{2x^2}" },
                        { t: "Step 3: ä»£å…¥ä¸Šä¸‹é™", d: (<span>ä»£å…¥ <Latex>{'t'}</Latex> èˆ‡ 1ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\left[ -\\frac{1}{2t^2} - (-\\frac{1}{2(1)^2}) \\right]" },
                        { t: "Step 4: æ±‚æ¥µé™", d: (<span>ç•¶ <Latex>{'t \\to \\infty'}</Latex>ï¼Œç¬¬ä¸€é …è¶¨è¿‘ 0ã€‚</span>), m: "\\displaystyle 0 + \\frac{1}{2} = 0.5 \\quad (\\text{Convergent æ”¶æ–‚})" }
                    ]
                },
                { 
                    id: 2, label: "Q 2", title: "ç·´ç¿’é¡Œ 2 (Ref Ex 2)", math: "\\displaystyle \\int_0^\\infty e^{-2x} \\, dx", 
                    steps: [
                        { t: "Step 1: å¯«å‡ºæ¥µé™å¼", d: (<span>ä¸Šé™ç‚ºç„¡çª®å¤§ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\int_0^t e^{-2x} \\, dx" },
                        { t: "Step 2: ç©åˆ†", d: (<span>æŒ‡æ•¸å‡½æ•¸ç©åˆ†ï¼Œéœ€é™¤ä»¥ä¿‚æ•¸ -2ã€‚</span>), m: "\\displaystyle \\left[ -\\frac{1}{2}e^{-2x} \\right]_0^t" },
                        { t: "Step 3: ä»£å…¥å€¼", d: (<span>ä»£å…¥ä¸Šä¸‹é™ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\left( -\\frac{1}{2}e^{-2t} - (-\\frac{1}{2}e^0) \\right)" },
                        { t: "Step 4: æ±‚æ¥µé™", d: (<span><Latex>{'e^{-2t} \\to 0'}</Latex>ã€‚</span>), m: "\\displaystyle 0 + \\frac{1}{2} = 0.5 \\quad (\\text{Convergent æ”¶æ–‚})" }
                    ]
                },
                { 
                    id: 3, label: "Q 3", title: "ç·´ç¿’é¡Œ 3 (Ref Ex 3)", math: "\\displaystyle \\int_{-\\infty}^\\infty \\frac{1}{x^2+4} \\, dx", 
                    steps: [
                        { t: "Step 1: æ‹†åˆ†ç©åˆ†", d: (<span>åœ¨ 0 è™•æ‹†åˆ†ã€‚</span>), m: "\\displaystyle \\int_{-\\infty}^0 \\frac{dx}{x^2+4} + \\int_0^\\infty \\frac{dx}{x^2+4}" },
                        { t: "Step 2: æ±‚å³åŠéƒ¨", d: (<span>å¥—ç”¨å…¬å¼ <Latex>{'\\int \\frac{dx}{x^2+a^2} = \\frac{1}{a}\\tan^{-1}(\\frac{x}{a})'}</Latex>ï¼Œ<Latex>{'a=2'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to \\infty} [\\frac{1}{2}\\tan^{-1}(\\frac{x}{2})]_0^t = \\frac{1}{2}(\\frac{\\pi}{2} - 0) = \\frac{\\pi}{4}" },
                        { t: "Step 3: æ±‚å·¦åŠéƒ¨", d: (<span>åŒç†è¨ˆç®—å·¦å´æ¥µé™ã€‚</span>), m: "\\displaystyle \\lim_{t \\to -\\infty} [\\frac{1}{2}\\tan^{-1}(\\frac{x}{2})]_t^0 = \\frac{1}{2}(0 - (-\\frac{\\pi}{2})) = \\frac{\\pi}{4}" },
                        { t: "Step 4: åŠ ç¸½", d: (<span>å…©éƒ¨åˆ†ç›¸åŠ ã€‚</span>), m: "\\displaystyle \\frac{\\pi}{4} + \\frac{\\pi}{4} = \\frac{\\pi}{2} \\quad (\\text{Convergent æ”¶æ–‚})" }
                    ]
                },
                { 
                    id: 4, label: "Q 4", title: "ç·´ç¿’é¡Œ 4 (Ref Ex 8)", math: "\\displaystyle \\int_0^4 \\frac{1}{\\sqrt{x}} \\, dx", 
                    steps: [
                        { t: "Step 1: æª¢æŸ¥æ–·é»", d: (<span>åœ¨ <Latex>{'x=0'}</Latex> è™•å‡½æ•¸ç„¡æ„ç¾© (Type 2)ã€‚</span>), m: "\\displaystyle \\text{Discontinuous at } x=0" },
                        { t: "Step 2: å¯«å‡ºæ¥µé™", d: (<span>å–å³æ¥µé™ <Latex>{'t \\to 0^+'}</Latex>ã€‚</span>), m: "\\displaystyle \\lim_{t \\to 0^+} \\int_t^4 x^{-1/2} \\, dx" },
                        { t: "Step 3: ç©åˆ†", d: (<span>å†ªæ¬¡æ³•å‰‡ <Latex>{'n=-1/2'}</Latex>ã€‚</span>), m: "\\displaystyle \\left[ 2x^{1/2} \\right]_t^4 = \\left[ 2\\sqrt{x} \\right]_t^4" },
                        { t: "Step 4: ä»£å…¥èˆ‡æ±‚æ¥µé™", d: (<span>ä»£å…¥æ•¸å€¼ã€‚</span>), m: "\\displaystyle \\lim_{t \\to 0^+} (2\\sqrt{4} - 2\\sqrt{t}) = 4 - 0 = 4 \\quad (\\text{Convergent æ”¶æ–‚})" }
                    ]
                },
                { 
                    id: 5, label: "Q 5", title: "ç·´ç¿’é¡Œ 5 (é™·é˜±é¡Œ Ref Ex 7)", math: "\\displaystyle \\int_{-1}^1 \\frac{1}{x^2} \\, dx", 
                    steps: [
                        { t: "Step 1: ç™¼ç¾éŒ¯èª¤é™·é˜±", d: (<span>å‡½æ•¸åœ¨ <Latex>{'x=0'}</Latex> ä¸é€£çºŒï¼Œä¸” 0 åœ¨å€é–“å…§ã€‚ä¸å¯ç›´æ¥ç©åˆ†ï¼</span>), m: "\\displaystyle \\text{Discontinuity at } x=0" },
                        { t: "Step 2: æ­£ç¢ºæ‹†åˆ†", d: (<span>æ‹†æˆå…©æ®µè¨ˆç®—ã€‚</span>), m: "\\displaystyle \\int_{-1}^0 x^{-2} dx + \\int_0^1 x^{-2} dx" },
                        { t: "Step 3: è¨ˆç®—å…¶ä¸­ä¸€éƒ¨åˆ†", d: (<span>è¨ˆç®— <Latex>{'[-1, 0]'}</Latex> éƒ¨åˆ†ã€‚</span>), m: "\\displaystyle \\lim_{t \\to 0^-} [-\\frac{1}{x}]_{-1}^t = \\lim_{t \\to 0^-} (-\\frac{1}{t} - 1) = \\infty" },
                        { t: "Step 4: çµè«–", d: (<span>å› ç‚ºæ¥µé™è¶¨å‘ç„¡é™å¤§ï¼Œç©åˆ†ç™¼æ•£ã€‚</span>), m: "\\displaystyle \\text{Divergent ç™¼æ•£}" }
                    ]
                }
            ],
            en: [
                { 
                    id: 1, label: "Q 1", title: "Practice 1 (Ref Ex 1)", math: "\\displaystyle \\int_1^\\infty \\frac{1}{x^3} \\, dx", 
                    steps: [
                        { t: "Step 1: Setup Limit", d: (<span>Type 1 Infinite Interval.</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\int_1^t x^{-3} \\, dx" },
                        { t: "Step 2: Integrate", d: (<span>Power rule.</span>), m: "\\displaystyle [-\\frac{1}{2x^2}]_1^t" },
                        { t: "Step 3: Substitute", d: (<span>Plug in limits.</span>), m: "\\displaystyle -\\frac{1}{2t^2} - (-\\frac{1}{2})" },
                        { t: "Step 4: Evaluate", d: (<span>Limit is 0.5.</span>), m: "\\displaystyle 0.5 \\quad (\\text{Convergent})" }
                    ]
                },
                { 
                    id: 2, label: "Q 2", title: "Practice 2 (Ref Ex 2)", math: "\\displaystyle \\int_0^\\infty e^{-2x} \\, dx", 
                    steps: [
                        { t: "Step 1: Setup Limit", d: (<span>Type 1 Infinite Interval.</span>), m: "\\displaystyle \\lim_{t \\to \\infty} \\int_0^t e^{-2x} \\, dx" },
                        { t: "Step 2: Integrate", d: (<span>Chain rule.</span>), m: "\\displaystyle [-\\frac{1}{2}e^{-2x}]_0^t" },
                        { t: "Step 3: Substitute", d: (<span>Plug in limits.</span>), m: "\\displaystyle -\\frac{1}{2}e^{-2t} - (-\\frac{1}{2})" },
                        { t: "Step 4: Evaluate", d: (<span>Limit is 0.5.</span>), m: "\\displaystyle 0.5 \\quad (\\text{Convergent})" }
                    ]
                },
                { 
                    id: 3, label: "Q 3", title: "Practice 3 (Ref Ex 3)", math: "\\displaystyle \\int_{-\\infty}^\\infty \\frac{1}{x^2+4} \\, dx", 
                    steps: [
                        { t: "Step 1: Split Integral", d: (<span>Split at 0.</span>), m: "\\displaystyle \\int_{-\\infty}^0 \\dots + \\int_0^\\infty \\dots" },
                        { t: "Step 2: Formula", d: (<span>Arctan formula with a=2.</span>), m: "\\displaystyle \\frac{1}{2}\\tan^{-1}(\\frac{x}{2})" },
                        { t: "Step 3: Evaluate Parts", d: (<span>Compute limits for both parts.</span>), m: "\\displaystyle \\frac{\\pi}{4} + \\frac{\\pi}{4}" },
                        { t: "Step 4: Sum", d: (<span>Total area.</span>), m: "\\displaystyle \\frac{\\pi}{2} \\quad (\\text{Convergent})" }
                    ]
                },
                { 
                    id: 4, label: "Q 4", title: "Practice 4 (Ref Ex 8)", math: "\\displaystyle \\int_0^4 \\frac{1}{\\sqrt{x}} \\, dx", 
                    steps: [
                        { t: "Step 1: Check Discontinuity", d: (<span>Type 2 at x=0.</span>), m: "\\displaystyle \\lim_{t \\to 0^+} \\int_t^4 x^{-1/2} \\, dx" },
                        { t: "Step 2: Integrate", d: (<span>Power rule.</span>), m: "\\displaystyle [2\\sqrt{x}]_t^4" },
                        { t: "Step 3: Substitute", d: (<span>Plug in limits.</span>), m: "\\displaystyle 2\\sqrt{4} - 2\\sqrt{t}" },
                        { t: "Step 4: Evaluate", d: (<span>Limit is 4.</span>), m: "\\displaystyle 4 \\quad (\\text{Convergent})" }
                    ]
                },
                { 
                    id: 5, label: "Q 5", title: "Practice 5 (Trap Ref Ex 7)", math: "\\displaystyle \\int_{-1}^1 \\frac{1}{x^2} \\, dx", 
                    steps: [
                        { t: "Step 1: Identify Trap", d: (<span>Discontinuous at x=0 inside interval.</span>), m: "\\displaystyle \\text{Cannot integrate directly!}" },
                        { t: "Step 2: Split", d: (<span>Split at 0.</span>), m: "\\displaystyle \\int_{-1}^0 x^{-2} dx + \\int_0^1 x^{-2} dx" },
                        { t: "Step 3: Evaluate Part", d: (<span>Compute limit for first part.</span>), m: "\\displaystyle \\lim_{t \\to 0^-} [-1/x]_{-1}^t = \\infty" },
                        { t: "Step 4: Conclusion", d: (<span>Diverges.</span>), m: "\\displaystyle \\text{Divergent}" }
                    ]
                }
            ]
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>