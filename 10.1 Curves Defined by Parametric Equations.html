<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微積分(II) - 10.1 參數方程曲線</title>
    <script type="text/javascript">
        window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', 'Noto Sans TC', sans-serif;
            background-color: #fff7f9; /* Soft Pink */
            color: #5c524f; /* Muted Brown */
        }
        .font-zh { font-family: 'Noto Sans TC', sans-serif; }
        .font-en { font-family: 'Poppins', sans-serif; }
        .math-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0.5rem 0.25rem;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .math-display::-webkit-scrollbar { display: none; }
        .active-tab {
            background-color: #d8b4fe; /* Lavender */
            color: #4c1d95; /* Deep Purple */
            font-weight: 700;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .inactive-tab {
            background-color: #f3e8ff; /* Light Lavender */
            color: #6b21a8; /* Purple */
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .accordion-content.show { max-height: 2000px; }
        .rotate-180 { transform: rotate(180deg); }
        .text-justify { text-align: justify; }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-container {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            pointer-events: auto;
        }
        .modal-overlay.show .modal-container { transform: translate(-50%, -50%) scale(1); }
        .blinking-cursor {
            display: inline-block;
            width: 8px;
            height: 1.5rem;
            background-color: #5c524f;
            animation: blink 1s step-end infinite;
            margin-left: 2px;
        }
        @keyframes blink {
            from, to { background-color: transparent }
            50% { background-color: #5c524f; }
        }
    </style>
</head>
<body class="text-lg font-zh">

    <header class="bg-white/80 backdrop-blur-md shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <h1 class="text-2xl font-bold text-purple-700 font-zh" data-i18n="header.title">
                        微積分(II)重補修班
                    </h1>
                    <p class="text-base text-stone-500 font-en" data-i18n="header.subtitle">授課老師:吳文銓 (Prof. Wu Wen-Chuan)</p>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="#concepts" class="text-stone-600 hover:bg-purple-200 hover:text-purple-800 px-3 py-2 rounded-md text-base font-medium" data-i18n="nav.concepts">核心概念</a>
                    <a href="#examples" class="text-stone-600 hover:bg-purple-200 hover:text-purple-800 px-3 py-2 rounded-md text-base font-medium" data-i18n="nav.examples">範例說明</a>
                    <a href="#practice" class="text-stone-600 hover:bg-purple-200 hover:text-purple-800 px-3 py-2 rounded-md text-base font-medium" data-i18n="nav.practice">自我練習</a>
                    <button id="api-key-modal-trigger" class="text-stone-500 hover:text-purple-600 transition-colors duration-200" title="Set AI API Key">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z"></path><circle cx="16.5" cy="7.5" r=".5"></circle></svg>
                    </button>
                    <button id="lang-toggle" class="bg-purple-100 text-purple-700 font-bold py-2 px-4 rounded-full w-28 text-center transition-all duration-300">
                        English
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-16">

        <section id="intro" class="text-center mb-20">
            <h2 class="text-4xl md:text-5xl font-bold text-purple-800 mb-4" data-i18n="main.title">10.1 參數方程定義的曲線</h2>
            <p class="max-w-3xl mx-auto text-xl text-stone-600" data-i18n="main.subtitle">Curves Defined by Parametric Equations</p>
        </section>

        <section id="concepts" class="mb-20 scroll-mt-24">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-stone-700" data-i18n="concepts.title">第一部分：核心概念</h3>
            <div class="space-y-10">
                <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                    <h4 class="text-2xl font-bold mb-4 text-purple-700" data-i18n="concepts.summary.title">🤔 課程摘要</h4>
                    <p class="text-stone-600 text-justify" data-i18n="concepts.summary.p1"></p>
                    <ul class="list-disc list-inside mt-5 space-y-4 text-stone-600">
                        <li data-i18n-html="concepts.summary.l1"></li>
                        <li data-i18n-html="concepts.summary.l2"></li>
                        <li data-i18n-html="concepts.summary.l3"></li>
                    </ul>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                    <h4 class="text-2xl font-bold mb-4 text-purple-700" data-i18n="concepts.objectives.title">🎯 學習目的</h4>
                     <ul class="list-disc list-inside space-y-3 text-stone-600">
                        <li class="text-justify" data-i18n="concepts.objectives.l1"></li>
                        <li class="text-justify" data-i18n="concepts.objectives.l2"></li>
                        <li class="text-justify" data-i18n="concepts.objectives.l3"></li>
                        <li class="text-justify" data-i18n="concepts.objectives.l4"></li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="examples" class="mb-16 scroll-mt-24">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-6 text-stone-700" data-i18n="examples.title">第二部分：範例說明</h3>
            <p class="text-center text-stone-600 max-w-3xl mx-auto mb-10 text-xl" data-i18n="examples.subtitle"></p>
            <div class="bg-white rounded-xl shadow-lg p-4 sm:p-8 border border-stone-200">
                <div id="example-tabs-container" class="flex flex-wrap gap-3 mb-8"></div>
                <div id="example-content-container"></div>
            </div>
        </section>

        <section id="practice" class="mb-16 scroll-mt-24">
            <div class="flex justify-center items-center gap-4 mb-6">
                <h3 class="text-3xl md:text-4xl font-bold text-stone-700" data-i18n="practice.title"></h3>
                <a href="Solution/10.1_solution.pdf" target="_blank" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-5 rounded-lg shadow-md transition-transform transform hover:scale-105 text-lg" data-i18n="practice.answerButton">答案</a>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 sm:p-8 border border-stone-200 space-y-8">
                <div>
                    <h4 class="text-xl font-bold text-purple-700 mb-4" data-i18n-html="practice.q1_instruction"></h4>
                    <ol id="practice-list-1" start="3" class="space-y-2 text-stone-700 text-lg"></ol>
                </div>
                <div class="border-t pt-8">
                    <h4 class="text-xl font-bold text-purple-700 mb-4" data-i18n-html="practice.q2_instruction"></h4>
                    <ol id="practice-list-2" start="7" class="space-y-2 text-stone-700 text-lg"></ol>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white/50 mt-16">
        <div class="container mx-auto px-8 py-6 text-center text-stone-500">
            <p data-i18n="footer.text">微積分互動教學</p>
        </div>
    </footer>

    <!-- Modals -->
    <div id="api-key-modal" class="modal-overlay">
        <div class="modal-container">
            <button id="api-key-modal-close" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            <div>
                <h3 class="text-2xl font-bold mb-4 text-stone-700" data-i18n="apiKeyModal.title"></h3>
                <p class="mb-4 text-stone-600" data-i18n="apiKeyModal.p1"></p>
                <input id="api-key-input" type="password" class="w-full px-4 py-3 rounded-md border-2 border-gray-300 focus:border-purple-500 focus:outline-none text-lg">
                <div class="flex justify-end gap-4 mt-6">
                    <button id="api-key-save" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-6 rounded-md shadow-md transition-transform transform hover:scale-105" data-i18n="apiKeyModal.save"></button>
                    <button id="api-key-modal-cancel" class="bg-stone-200 hover:bg-stone-300 text-stone-700 font-bold py-2 px-6 rounded-md shadow-md transition-transform transform hover:scale-105" data-i18n="apiKeyModal.cancel"></button>
                </div>
                 <p id="save-status" class="text-sm text-green-600 mt-2 h-4"></p>
            </div>
        </div>
    </div>
    
    <div id="ai-tutor-modal" class="modal-overlay">
        <div id="ai-tutor-modal-container" class="modal-container">
            <div id="ai-tutor-modal-header" class="w-full pb-4 border-b border-gray-200 cursor-move">
                 <h3 class="text-2xl font-bold text-purple-700" data-i18n="aiTutorModal.title"></h3>
            </div>
            <button id="ai-tutor-modal-close" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            <div id="ai-tutor-status" class="text-stone-700 leading-relaxed space-y-4 min-h-[50px] mt-4"></div>
            <audio id="ai-tutor-audio" class="w-full mt-4" controls></audio>
        </div>
    </div>

    <script>
    window.addEventListener('load', () => {
    
        // =================================================================
        // 1. 資料與狀態管理 (DATA & STATE MANAGEMENT)
        // =================================================================
        // 摘要: 此模組負責管理應用程式的狀態 (例如目前的語言) 
        // 以及儲存所有範例和 UI 文本的資料。
        
        const AppState = {
            currentLanguage: 'zh', // 'zh' 或 'en'
            activeExampleIndex: 0
        };

        const Translations = {
            zh: {
                header: {
                    title: "微積分(II)重補修班",
                    subtitle: "授課老師:吳文銓 (Prof. Wu Wen-Chuan)"
                },
                nav: { concepts: "核心概念", examples: "範例說明", practice: "自我練習" },
                main: { title: "10.1 參數方程定義的曲線", subtitle: "Curves Defined by Parametric Equations" },
                concepts: {
                    title: "第一部分：核心概念",
                    summary: {
                        title: "🤔 課程摘要",
                        p1: "參數方程是描述曲線的另一種方式。相較於使用單一笛卡爾方程式（如 $y=f(x)$），我們引入一個稱為「參數」的第三變數（通常是 $t$），並將 $x$ 和 $y$ 坐標分別表示為 $t$ 的函數。",
                        l1: "<b>參數曲線 (Parametric Curve)</b><br>如果 $x$ 和 $y$ 都是參數 $t$ 在某個區間 $I$ 上的函數，即 $x=f(t)$ 和 $y=g(t)$，那麼所有點 $(x, y) = (f(t), g(t))$ 的集合就構成一條參數曲線。方程式 $x=f(t)$ 和 $y=g(t)$ 稱為該曲線的參數方程。",
                        l2: "<b>描繪曲線 (Sketching a Curve)</b><br>我們可以透過選擇不同的 $t$ 值，計算對應的 $(x, y)$ 坐標，然後將這些點在坐標平面上連接起來，從而描繪出曲線的圖形。$t$ 增加的方向通常表示曲線的「方向性」(orientation)。",
                        l3: "<b>消去參數 (Eliminating the Parameter)</b><br>有時，我們可以透過代數運算（如代入消去法）或三角恆等式從參數方程中消去參數 $t$，得到一個只包含 $x$ 和 $y$ 的笛卡爾方程式。這有助於我們辨識曲線的類型（如直線、拋物線、圓等）。"
                    },
                    objectives: {
                        title: "🎯 學習目的",
                        l1: "理解參數方程的概念，並知道如何用它來表示平面上的曲線。",
                        l2: "能夠透過代入不同的參數值來描繪參數曲線的圖形，並標示其方向性。",
                        l3: "學習如何從一組參數方程中消去參數，以得到對應的笛卡爾方程式。",
                        l4: "能夠辨識常見曲線（如直線、圓、橢圓和拋物線）的參數方程形式。"
                    }
                },
                examples: {
                    title: "第二部分：範例說明",
                    subtitle: "請選擇題型範例。每個範例都將引導您完成從「觀察分析」到「解題」的完整流程。",
                    analysisTitle: "觀察與分析：",
                    stepsTitle: "解題步驟：",
                    aiTutorButton: "AI助教解說"
                },
                practice: {
                    title: "第三部分：自我練習 (課本)",
                    answerButton: "答案",
                    q1_instruction: "透過描點來描繪由參數方程定義的曲線。並用箭頭指出隨著 t 增加，曲線所描繪的方向。",
                    q1_instruction_plain: "描繪由參數方程定義的曲線，並用箭頭指出其方向:",
                    q2_instruction: "(a) 透過描點來描繪由參數方程定義的曲線。並用箭頭指出隨著 t 增加，曲線所描繪的方向。<br>(b) 消去參數以求得曲線的笛卡爾方程式。",
                    q2_instruction_plain: "描繪由參數方程定義的曲線，指出方向，並消去參數以求得笛卡爾方程式:",
                    copyButtonTitle: "複製題目",
                    copied: "已複製！",
                    problems1: [
                        "$x = 1 - t^2, y = 2t - t^2, \\quad -1 \\le t \\le 2$",
                        "$x = t^3 + t, y = t^2 + 2, \\quad -2 \\le t \\le 2$",
                        "$x = 2^t - t, y = 2^{-t} + t, \\quad -3 \\le t \\le 3$",
                        "$x = \\cos^2 t, y = 1 + \\cos t, \\quad 0 \\le t \\le \\pi$"
                    ],
                    problems2: [
                        "$x = 2t - 1, y = \\frac{1}{2}t + 1$",
                        "$x = 3t + 2, y = 2t + 3$",
                        "$x = t^2 - 3, y = t + 2, \\quad -3 \\le t \\le 3$",
                        "$x = \\sin t, y = 1 - \\cos t, \\quad 0 \\le t \\le 2\\pi$",
                        "$x = \\sqrt{t}, y = 1 - t$",
                        "$x = t^2, y = t^3$"
                    ]
                },
                footer: { text: "微積分互動教學" },
                apiKeyModal: {
                    title: "設定 Google AI Studio API Key",
                    p1: "請輸入您的 API Key 以啟用 AI 助教功能。您的 Key 將只會儲存在您的瀏覽器中。",
                    save: "儲存",
                    cancel: "取消"
                },
                aiTutorModal: { title: "AI 助教語音解說" }
            },
            en: {
                header: {
                    title: "Calculus (II)",
                    subtitle: "Instructor: Prof. Wu Wen-Chuan"
                },
                nav: { concepts: "Core Concepts", examples: "Examples", practice: "Practice" },
                main: { title: "10.1 Curves Defined by Parametric Equations", subtitle: "參數方程定義的曲線" },
                concepts: {
                    title: "Part 1: Core Concepts",
                    summary: {
                        title: "🤔 Lesson Summary",
                        p1: "Parametric equations provide another way to describe a curve. Instead of a single Cartesian equation (like $y=f(x)$), we introduce a third variable called a 'parameter' (usually $t$), and express both the $x$ and $y$ coordinates as functions of $t$.",
                        l1: "<b>Parametric Curve</b><br>If $x$ and $y$ are given as functions $x=f(t)$ and $y=g(t)$ over an interval $I$ of $t$-values, then the set of points $(x, y) = (f(t), g(t))$ is a parametric curve. The equations are parametric equations for the curve.",
                        l2: "<b>Sketching a Curve</b><br>We can sketch a parametric curve by choosing various values of $t$, calculating the corresponding $(x, y)$ coordinates, and then plotting and connecting these points. The direction of increasing $t$ gives the curve's orientation.",
                        l3: "<b>Eliminating the Parameter</b><br>Sometimes it's possible to eliminate the parameter $t$ from the equations, using algebraic manipulation (like substitution) or trigonometric identities, to obtain a Cartesian equation in $x$ and $y$. This helps us identify the shape of the curve (e.g., line, parabola, circle)."
                    },
                    objectives: {
                        title: "🎯 Learning Objectives",
                        l1: "Understand the concept of parametric equations and how they represent a curve in the plane.",
                        l2: "Be able to sketch a parametric curve by plotting points for various values of the parameter and indicating its orientation.",
                        l3: "Learn how to eliminate the parameter from a set of parametric equations to find the corresponding Cartesian equation.",
                        l4: "Be able to recognize the parametric forms of common curves like lines, circles, ellipses, and parabolas."
                    }
                },
                examples: {
                    title: "Part 2: Examples",
                    subtitle: "Select an example. Each one will guide you through the complete process from 'Analysis' to 'Solution'.",
                    analysisTitle: "Observation & Analysis:",
                    stepsTitle: "Solution Steps:",
                    aiTutorButton: "AI Tutor Explanation"
                },
                practice: {
                    title: "Part 3: Self Practice (Textbook)",
                    answerButton: "Solution",
                    q1_instruction: "Sketch the curve by using the parametric equations to plot points. Indicate with an arrow the direction in which the curve is traced as t increases.",
                    q1_instruction_plain: "Sketch the curve by using the parametric equations to plot points. Indicate with an arrow the direction in which the curve is traced as t increases:",
                    q2_instruction: "(a) Sketch the curve by using the parametric equations to plot points. Indicate with an arrow the direction in which the curve is traced as t increases.<br>(b) Eliminate the parameter to find a Cartesian equation of the curve.",
                    q2_instruction_plain: "(a) Sketch the curve... (b) Eliminate the parameter to find a Cartesian equation of the curve:",
                    copyButtonTitle: "Copy problem",
                    copied: "Copied!",
                    problems1: [
                        "$x = 1 - t^2, y = 2t - t^2, \\quad -1 \\le t \\le 2$",
                        "$x = t^3 + t, y = t^2 + 2, \\quad -2 \\le t \\le 2$",
                        "$x = 2^t - t, y = 2^{-t} + t, \\quad -3 \\le t \\le 3$",
                        // FIX: Corrected this problem to match the Chinese version for consistency.
                        "$x = \\cos^2 t, y = 1 + \\cos t, \\quad 0 \\le t \\le \\pi$"
                    ],
                    problems2: [
                        "$x = 2t - 1, y = \\frac{1}{2}t + 1$",
                        "$x = 3t + 2, y = 2t + 3$",
                        "$x = t^2 - 3, y = t + 2, \\quad -3 \\le t \\le 3$",
                        "$x = \\sin t, y = 1 - \\cos t, \\quad 0 \\le t \\le 2\\pi$",
                        "$x = \\sqrt{t}, y = 1 - t$",
                        "$x = t^2, y = t^3$"
                    ]
                },
                footer: { text: "Interactive Calculus Tutorial" },
                apiKeyModal: {
                    title: "Set Google AI Studio API Key",
                    p1: "Please enter your API Key to enable the AI Tutor feature. Your key will be stored only in your browser.",
                    save: "Save",
                    cancel: "Cancel"
                },
                aiTutorModal: { title: "AI Tutor Voice Explanation" }
            }
        };
        
        const ExamplesData = [
            {
                title: { zh: '描繪拋物線', en: 'Sketching a Parabola'},
                problem: { zh: '描繪並辨識由參數方程 $x = t^2 - 2t, y = t + 1$ 定義的曲線。', en: 'Sketch and identify the curve defined by the parametric equations $x = t^2 - 2t, y = t + 1$.'},
                source: 'p.662 Example 1',
                analysis: {
                    zh: '為了辨識曲線的形狀，我們可以嘗試消去參數 $t$。從第二個方程式可以很輕易地解出 $t$，然後將其代入第一個方程式，得到一個只包含 $x$ 和 $y$ 的關係式。',
                    en: 'To identify the shape of the curve, we can try to eliminate the parameter $t$. It is easy to solve for $t$ from the second equation and then substitute it into the first equation to get a relationship between $x$ and $y$.'
                },
                steps: [
                    {
                        title: { zh: '步驟 1：解出參數 t', en: 'Step 1: Solve for the parameter t'},
                        content: { zh: `從第二個方程式 $y = t + 1$ 中，我們可以得到： $$t = y - 1$$`, en: `From the second equation, $y = t + 1$, we get: $$t = y - 1$$` }
                    },
                    {
                        title: { zh: '步驟 2：代入並化簡', en: 'Step 2: Substitute and Simplify' },
                        content: { zh: `將 $t = y - 1$ 代入 $x$ 的方程式： $$x = (y-1)^2 - 2(y-1)$$ $$x = (y^2 - 2y + 1) - (2y - 2)$$ $$x = y^2 - 4y + 3$$`, en: `Substitute $t = y - 1$ into the equation for $x$: $$x = (y-1)^2 - 2(y-1)$$ $$x = (y^2 - 2y + 1) - (2y - 2)$$ $$x = y^2 - 4y + 3$$` }
                    },
                    {
                        title: { zh: '步驟 3：辨識曲線', en: 'Step 3: Identify the Curve' },
                        content: { 
                            zh: `方程式 $x = y^2 - 4y + 3$ 代表一個水平開口的拋物線。我們可以透過配方法找到其頂點：$x = (y-2)^2 - 1$。頂點位於 $(-1, 2)$。
                            <img src="10.1_1.png" alt="圖1" class="mx-auto max-w-sm">`,
                            en: `The equation $x = y^2 - 4y + 3$ represents a parabola that opens to the right. We can find its vertex by completing the square: $x = (y-2)^2 - 1$. The vertex is at $(-1, 2).
                            <img src="10.1_1.png" alt="圖1" class="mx-auto max-w-sm">`
                        }
                    }
                ]
            },
            {
                title: { zh: '辨識單位圓', en: 'Identifying the Unit Circle'},
                problem: { zh: '由參數方程 $x = \\cos t, y = \\sin t, 0 \\le t \\le 2\\pi$ 代表的曲線是什麼？', en: 'What curve is represented by the parametric equations $x = \\cos t, y = \\sin t, 0 \\le t \\le 2\\pi$?'},
                source: 'p.664 Example 2',
                analysis: {
                    zh: '當參數方程涉及三角函數 $\\sin$ 和 $\\cos$ 時，一個常用的技巧是利用三角恆等式 $\\sin^2 t + \\cos^2 t = 1$ 來消去參數 $t$。',
                    en: 'When parametric equations involve trigonometric functions like $\\sin$ and $\\cos$, a common technique is to use the identity $\\sin^2 t + \\cos^2 t = 1$ to eliminate the parameter $t$.'
                },
                steps: [
                    {
                        title: { zh: '步驟 1：利用三角恆等式', en: 'Step 1: Use the Trigonometric Identity' },
                        content: { zh: `我們有 $x^2 + y^2 = (\\cos t)^2 + (\\sin t)^2$。根據畢氏三角恆等式，我們知道： $$x^2 + y^2 = 1$$`, en: `We have $x^2 + y^2 = (\\cos t)^2 + (\\sin t)^2$. According to the Pythagorean trigonometric identity, we know that: $$x^2 + y^2 = 1$$` }
                    },
                    {
                        title: { zh: '步驟 2：辨識曲線與方向', en: 'Step 2: Identify the Curve and Orientation' },
                        content: { 
                            zh: `方程式 $x^2 + y^2 = 1$ 是圓心在原點 $(0,0)$、半徑為 1 的單位圓。<br>當參數 $t$ 從 $0$ 增加到 $2\\pi$，點 $(x,y)$ 從 $(1,0)$ 開始，沿著圓逆時針移動一整圈，最後回到 $(1,0)$。
                            <img src="10.1_2.png" alt="圖2" class="mx-auto max-w-sm">`,
                            en: `The equation $x^2 + y^2 = 1$ is the unit circle, centered at the origin $(0,0)$ with a radius of 1.<br>As the parameter $t$ increases from $0$ to $2\\pi$, the point $(x,y)$ starts at $(1,0)$ and moves counterclockwise around the entire circle, returning to $(1,0).
                            <img src="10.1_2.png" alt="圖2" class="mx-auto max-w-sm">`
                        }
                    }
                ]
            },
            {
                title: { zh: '重複描繪的曲線', en: 'A Curve Traced Multiple Times' },
                problem: { zh: '由參數方程 $x = \\sin 2t, y = \\cos 2t, 0 \\le t \\le 2\\pi$ 代表的曲線是什麼？', en: 'What curve is represented by the given parametric equations $x = \\sin 2t, y = \\cos 2t, 0 \\le t \\le 2\\pi$?' },
                source: 'p.662 Example 3',
                analysis: {
                    zh: '這個範例與前一題非常相似。我們同樣可以使用 $\\sin^2 \\theta + \\cos^2 \\theta = 1$ 這個恆等式，其中 $\\theta = 2t$。需要注意的是參數的係數會如何影響曲線的描繪過程。',
                    en: 'This example is very similar to the previous one. We can again use the identity $\\sin^2 \\theta + \\cos^2 \\theta = 1$, where $\\theta = 2t$. It is important to note how the coefficient of the parameter affects how the curve is traced.'
                },
                steps: [
                     {
                        title: { zh: '步驟 1：消去參數', en: 'Step 1: Eliminate the Parameter' },
                        content: { zh: `$$x^2 + y^2 = (\\sin 2t)^2 + (\\cos 2t)^2 = 1$$ 同樣地，我們得到單位圓的方程式 $x^2+y^2=1$。`, 
                                 en: `$$x^2 + y^2 = (\\sin 2t)^2 + (\\cos 2t)^2 = 1$$ Again, we obtain the equation of the unit circle, $x^2+y^2=1$.` }
                    },
                    {
                        title: { zh: '步驟 2：分析描繪過程', en: 'Step 2: Analyze the Tracing Process' },
                        content: { zh: `雖然曲線是單位圓，但由於參數是 $2t$，當 $t$ 從 $0$ 增加到 $\\pi$ 時，$2t$ 就從 $0$ 增加到 $2\\pi$，這意味著點 $(x,y)$ 已經完整地繞了圓一圈。<br>因此，當 $t$ 從 $0$ 增加到 $2\\pi$ 時，這個單位圓會被完整地描繪兩次。
                                         <img src="10.1_3.png" alt="圖3" class="mx-auto max-w-sm">`, 
                                 en: `Although the curve is the unit circle, because the parameter is $2t$, as $t$ increases from $0$ to $\\pi$, $2t$ increases from $0$ to $2\\pi$. This means the point $(x,y)$ has already traced the entire circle once.<br>Therefore, as $t$ increases from $0$ to $2\\pi$, the unit circle is traced completely twice.
                                         <img src="10.1_3.png" alt="圖3" class="mx-auto max-w-sm">` }
                    }
                ]
            }
        ];
        
        // =================================================================
        // 2. UI 渲染模組 (UI RENDERING MODULE)
        // =================================================================
        // 摘要: 此模組負責所有 DOM 操作，包括根據目前的語言渲染頁籤、
        // 範例內容以及更新靜態文本。
        
        const UIRenderer = {
            async init() {
                this.updateAllText(AppState.currentLanguage);
                this.renderTabs(AppState.currentLanguage);
                this.renderExampleContent(AppState.activeExampleIndex, AppState.currentLanguage);
                this.renderPracticeProblems(AppState.currentLanguage);
                await MathJax.typesetPromise();
            },
            
            updateAllText(lang) {
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.dataset.i18n;
                    const translation = key.split('.').reduce((obj, k) => obj && obj[k], Translations[lang]);
                    if (translation) {
                        el.textContent = translation;
                    }
                });
                
                 document.querySelectorAll('[data-i18n-html]').forEach(el => {
                    const key = el.dataset.i18nHtml;
                    const translation = key.split('.').reduce((obj, k) => obj && obj[k], Translations[lang]);
                    if (translation) {
                        el.innerHTML = translation;
                    }
                });
                
                // 更新特定元素，如 placeholder
                const apiKeyInput = document.getElementById('api-key-input');
                apiKeyInput.placeholder = lang === 'zh' ? '請在此輸入 API Key' : 'Enter API Key here';
            },

            renderTabs(lang) {
                const container = document.getElementById('example-tabs-container');
                container.innerHTML = ExamplesData.map((ex, i) => {
                    const title = ex.title[lang] || ex.title['en'];
                    return `<button data-index="${i}" class="tab-button text-base sm:text-lg py-3 px-5 rounded-lg transition duration-300 ${i === AppState.activeExampleIndex ? 'active-tab' : 'inactive-tab'}">${title}</button>`;
                }).join('');

                container.querySelectorAll('.tab-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const newIndex = parseInt(e.currentTarget.dataset.index);
                        AppState.activeExampleIndex = newIndex;
                        this.renderTabs(lang);
                        this.renderExampleContent(newIndex, lang);
                    });
                });
            },

            async renderExampleContent(index, lang) {
                const container = document.getElementById('example-content-container');
                const example = ExamplesData[index];
                const t = Translations[lang].examples;

                const stepsHtml = example.steps.map((step, i) => `
                    <div class="border-b border-stone-200 last:border-b-0">
                        <button class="accordion-header w-full text-left p-5 focus:outline-none hover:bg-purple-50 transition duration-300 flex justify-between items-center">
                            <span class="font-semibold text-lg text-stone-700">${step.title[lang]}</span>
                            <svg class="w-6 h-6 text-purple-600 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <div class="p-5 bg-stone-50 border-t border-stone-200 text-stone-600 leading-relaxed math-display">${step.content[lang]}</div>
                        </div>
                    </div>
                `).join('');

                container.innerHTML = `
                    <div class="mb-8">
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4">
                             <h4 class="text-2xl font-bold text-stone-800">${example.title[lang]}</h4>
                             <button id="ai-tutor-button" data-index="${index}" class="ai-tutor-btn flex items-center justify-center gap-2 bg-purple-500 text-white font-bold py-3 px-5 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 disabled:bg-gray-400 disabled:opacity-70 disabled:cursor-not-allowed">
                                 <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>
                                 <span>${t.aiTutorButton}</span>
                             </button>
                        </div>
                        <div class="p-5 bg-amber-100/70 rounded-lg text-xl math-display">${example.problem[lang]}</div>
                        ${example.source ? `<p class="mt-2 text-base text-stone-500 text-right font-en">${example.source}</p>` : ''}
                    </div>
                    <div class="mb-8">
                        <h4 class="text-2xl font-bold text-stone-800 mb-3">${t.analysisTitle}</h4>
                        <p class="p-5 bg-sky-100/70 rounded-lg text-stone-600">${example.analysis[lang]}</p>
                    </div>
                    <div>
                        <h4 class="text-2xl font-bold text-stone-800 mb-3">${t.stepsTitle}</h4>
                        <div class="border border-stone-200 rounded-lg overflow-hidden">${stepsHtml}</div>
                    </div>
                `;
                
                this.attachEventListeners();
                // 觸發 MathJax 重新渲染新的內容
                await MathJax.typesetPromise();
            },
            
            renderPracticeProblems(lang) {
                const t = Translations[lang].practice;
                if (!document.getElementById('practice')) return; 

                const copyIconSvg = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;

                const populateList = (element, problems, instruction) => {
                    if (element) {
                        const startNum = parseInt(element.getAttribute('start') || '1', 10);
                        element.innerHTML = problems.map((problem, index) => {
                            const itemNumber = startNum + index;
                            const cleanProblem = problem.replace(/\$/g, '').replace(/<[^>]*>/g, '').replace(/\\quad/g, ' ').replace(/\\/g, '');
                            const copyText = `${instruction} ${itemNumber}. ${cleanProblem}`;
                            return `<li class="flex justify-between items-center">
                                        <div class="flex-grow">
                                            <span class="font-bold mr-2">${itemNumber}.</span>
                                            <span>${problem}</span>
                                        </div>
                                        <button data-copy-text="${copyText}" class="copy-btn p-1 ml-4 flex-shrink-0 rounded-md hover:bg-purple-100" title="${t.copyButtonTitle}">
                                            ${copyIconSvg}
                                        </button>
                                    </li>`;
                        }).join('');
                    }
                };

                populateList(
                    document.getElementById('practice-list-1'),
                    t.problems1,
                    t.q1_instruction_plain
                );
                populateList(
                    document.getElementById('practice-list-2'),
                    t.problems2,
                    t.q2_instruction_plain
                );
            },

            attachEventListeners() {
                // 手風琴 (Accordion) 邏輯
                document.querySelectorAll('#example-content-container .accordion-header').forEach(header => {
                    header.addEventListener('click', () => {
                        header.nextElementSibling.classList.toggle('show');
                        header.querySelector('svg').classList.toggle('rotate-180');
                    });
                });
                
                // AI 助教按鈕邏輯
                const aiTutorButton = document.getElementById('ai-tutor-button');
                const apiKey = localStorage.getItem('googleApiKey');
                if (!apiKey) {
                    aiTutorButton.disabled = true;
                    aiTutorButton.title = AppState.currentLanguage === 'zh' ? '請先設定 API Key' : 'Please set API Key first';
                }
                aiTutorButton.addEventListener('click', (e) => {
                    AITutor.handleRequest(e.currentTarget.dataset.index, AppState.currentLanguage);
                });
            }
        };

        // =================================================================
        // 3. 彈出視窗管理模組 (MODAL MANAGEMENT MODULE)
        // =================================================================
        // 摘要: 處理所有與彈出視窗相關的功能，包括開啟、關閉，
        // 以及讓視窗可拖動。
        
        const ModalManager = {
            init() {
                this.apiKeyModal = document.getElementById('api-key-modal');
                this.aiTutorModal = document.getElementById('ai-tutor-modal');
                
                this.setupModal(this.apiKeyModal, 'api-key-modal-trigger', 'api-key-modal-close');
                this.setupModal(this.aiTutorModal, null, 'ai-tutor-modal-close');
                
                document.getElementById('api-key-modal-cancel').addEventListener('click', () => this.apiKeyModal.classList.remove('show'));
                document.getElementById('api-key-save').addEventListener('click', this.saveApiKey.bind(this));

                this.makeDraggable(document.getElementById('ai-tutor-modal-container'), document.getElementById('ai-tutor-modal-header'));
            },

            setupModal(modal, triggerId, closeButtonId) {
                const trigger = document.getElementById(triggerId);
                const closeBtn = document.getElementById(closeButtonId);
                
                const openModal = () => modal.classList.add('show');
                const closeModal = () => {
                    modal.classList.remove('show');
                    if (modal.id === 'ai-tutor-modal') {
                        const audioPlayer = document.getElementById('ai-tutor-audio');
                        audioPlayer.pause();
                        audioPlayer.currentTime = 0;
                    }
                };

                if (trigger) trigger.addEventListener('click', openModal);
                if (closeBtn) closeBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal();
                });
            },
            
            saveApiKey() {
                const apiKeyInput = document.getElementById('api-key-input');
                const saveStatus = document.getElementById('save-status');
                const key = apiKeyInput.value.trim();
                
                if (key) {
                    localStorage.setItem('googleApiKey', key);
                    saveStatus.textContent = AppState.currentLanguage === 'zh' ? 'API Key 已儲存！' : 'API Key saved!';
                } else {
                    localStorage.removeItem('googleApiKey');
                    saveStatus.textContent = AppState.currentLanguage === 'zh' ? 'API Key 已清除。' : 'API Key cleared.';
                }
                
                UIRenderer.renderExampleContent(AppState.activeExampleIndex, AppState.currentLanguage);
                setTimeout(() => {
                    this.apiKeyModal.classList.remove('show');
                    saveStatus.textContent = '';
                }, 1000);
            },
            
            makeDraggable(modal, header) {
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                header.onmousedown = (e) => {
                    e.preventDefault();
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    document.onmouseup = () => { document.onmouseup = null; document.onmousemove = null; };
                    document.onmousemove = (ev) => {
                        ev.preventDefault();
                        pos1 = pos3 - ev.clientX;
                        pos2 = pos4 - ev.clientY;
                        pos3 = ev.clientX;
                        pos4 = ev.clientY;
                        modal.style.top = (modal.offsetTop - pos2) + "px";
                        modal.style.left = (modal.offsetLeft - pos1) + "px";
                        modal.style.transform = 'none'; 
                    };
                };
            }
        };

        // =================================================================
        // 4. AI 助教模組 (AI TUTOR MODULE)
        // =================================================================
        // 摘要: 此模組處理所有與 Google AI API 的互動，包括生成
        // 文字解釋並將其轉換為語音。
        
        const AITutor = {
            async handleRequest(index, lang) {
                const apiKey = localStorage.getItem('googleApiKey');
                if (!apiKey) return;
                
                const example = ExamplesData[index];
                const stepsText = example.steps.map(s => `${s.title[lang]}:\n${s.content[lang].replace(/<br>/g, '\n').replace(/<[^>]*>/g, '')}`).join('\n\n');
                const prompt = `Problem:\n${example.problem[lang].replace(/<[^>]*>/g, '')}\n\nAnalysis:\n${example.analysis[lang]}\n\nSolution Steps:\n${stepsText}`;
                
                const systemPrompt = lang === 'zh'
                    ? "你是一位親切的微積分助教。請用簡單易懂、口語化的方式，解說以下的微積分題目。請先解釋解題的思路，然後逐步說明解題過程。"
                    : "You are a friendly calculus tutor. Explain the following calculus problem in a simple, conversational way. First, explain the overall thinking process, then walk through the solution steps.";

                this.generateExplanation(prompt, systemPrompt, apiKey);
            },
            
            async _fetchWithRetry(url, options, maxRetries = 4) {
                let lastError;
                for (let i = 0; i < maxRetries; i++) {
                    try {
                        const response = await fetch(url, options);
                        if (response.ok) {
                            return response;
                        }
                        // Only retry on server errors or rate limiting
                        if (response.status === 429 || response.status >= 500) {
                            lastError = new Error(`API request failed with status ${response.status}`);
                        } else {
                            // Don't retry on other client errors (e.g., 400 Bad Request)
                            const errorBody = await response.text();
                            throw new Error(`API request failed with status ${response.status}: ${errorBody}`);
                        }
                    } catch (error) {
                        lastError = error;
                    }
                    // Wait with exponential backoff and jitter
                    if (i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 500;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    }
                }
                throw lastError;
            },

            async generateExplanation(prompt, systemPrompt, apiKey) {
                const statusEl = document.getElementById('ai-tutor-status');
                const audioEl = document.getElementById('ai-tutor-audio');
                const modal = document.getElementById('ai-tutor-modal');
                
                // 重設並顯示彈出視窗
                const modalContainer = document.getElementById('ai-tutor-modal-container');
                modalContainer.style.top = '50%';
                modalContainer.style.left = '50%';
                modalContainer.style.transform = 'translate(-50%, -50%)';
                statusEl.innerHTML = `<p>${AppState.currentLanguage === 'zh' ? 'AI 助教思考中...' : 'AI Tutor is thinking...'}<span class="blinking-cursor"></span></p>`;
                audioEl.src = '';
                audioEl.hidden = true;
                modal.classList.add('show');
                
                const textApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const ttsApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

                try {
                    const textPayload = {
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    };
                    const textResponse = await this._fetchWithRetry(textApiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(textPayload) });
                    const textResult = await textResponse.json();
                    const explanationText = textResult.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (!explanationText) throw new Error('Could not get valid text content from API.');
                    
                    statusEl.innerHTML = `<p>${AppState.currentLanguage === 'zh' ? '正在為您產生語音...' : 'Generating audio for you...'}<span class="blinking-cursor"></span></p>`;
                    
                    const ttsPayload = {
                        contents: [{ parts: [{ text: explanationText }] }],
                        generationConfig: {
                            responseModalities: ["AUDIO"],
                            speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Sadaltager" } } }
                        }
                    };
                    const audioResponse = await this._fetchWithRetry(ttsApiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(ttsPayload) });
                    const audioResult = await audioResponse.json();
                    const audioData = audioResult?.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;
                    const mimeType = audioResult?.candidates?.[0]?.content?.parts?.[0]?.inlineData?.mimeType;

                    if (audioData && mimeType && mimeType.startsWith("audio/")) {
                        const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)[1], 10);
                        const pcmData = this._base64ToArrayBuffer(audioData);
                        const wavBlob = this._pcmToWav(new Int16Array(pcmData), sampleRate);
                        const audioUrl = URL.createObjectURL(wavBlob);
                        
                        statusEl.innerHTML = `<p>${AppState.currentLanguage === 'zh' ? '語音解說已就緒！' : 'Voice explanation is ready!'}</p>`;
                        audioEl.src = audioUrl;
                        audioEl.hidden = false;
                        audioEl.play();
                    } else {
                        throw new Error('Could not get valid audio content from API.');
                    }
                } catch (error) {
                    console.error("AI Tutor Error:", error);
                    statusEl.innerHTML = `<p class="text-red-600">${AppState.currentLanguage === 'zh' ? '抱歉，AI 助教出了一點問題：' : 'Sorry, the AI tutor ran into an issue:'}<br>${error.message}</p><p class="text-sm mt-2">${AppState.currentLanguage === 'zh' ? '請確認您的 API Key 是否正確且有足夠的權限。' : 'Please check if your API Key is correct and has sufficient permissions.'}</p>`;
                }
            },
            
            _base64ToArrayBuffer(base64) {
                const binaryString = window.atob(base64);
                const len = binaryString.length;
                const bytes = new Uint8Array(len);
                for (let i = 0; i < len; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                return bytes.buffer;
            },

            _pcmToWav(pcmData, sampleRate) {
                const dataSize = pcmData.length * 2;
                const buffer = new ArrayBuffer(44 + dataSize);
                const view = new DataView(buffer);
                view.setUint32(0, 0x52494646, false); // "RIFF"
                view.setUint32(4, 36 + dataSize, true);
                view.setUint32(8, 0x57415645, false); // "WAVE"
                view.setUint32(12, 0x666d7420, false); // "fmt "
                view.setUint32(16, 16, true);
                view.setUint16(20, 1, true);
                view.setUint16(22, 1, true); // numChannels
                view.setUint32(24, sampleRate, true);
                view.setUint32(28, samplerate * 2, true); // byteRate
                view.setUint16(32, 2, true); // blockAlign
                view.setUint16(34, 16, true); // bitsPerSample
                view.setUint32(36, 0x64617461, false); // "data"
                view.setUint32(40, dataSize, true);
                let offset = 44;
                for (let i = 0; i < pcmData.length; i++, offset += 2) {
                    view.setInt16(offset, pcmData[i], true);
                }
                return new Blob([view], { type: 'audio/wav' });
            }
        };

        // =================================================================
        // 5. 應用程式初始化 (APPLICATION INITIALIZATION)
        // =================================================================
        // 摘要: 這是應用程式的主要進入點。它會初始化所有模組並
        // 設定初始的事件監聽器。
        
        async function main() {
            const langToggleButton = document.getElementById('lang-toggle');
            
            langToggleButton.addEventListener('click', async () => {
                AppState.currentLanguage = AppState.currentLanguage === 'zh' ? 'en' : 'zh';
                langToggleButton.textContent = AppState.currentLanguage === 'zh' ? 'English' : '繁體中文';
                
                document.documentElement.lang = AppState.currentLanguage === 'zh' ? 'zh-Hant' : 'en';

                // 正確地管理 body 的 class 以切換字體樣式
                document.body.classList.remove('font-zh', 'font-en');
                if (AppState.currentLanguage === 'zh') {
                    document.body.classList.add('font-zh');
                } else {
                    document.body.classList.add('font-en');
                }

                await UIRenderer.init();
            });

            // 初始設定
            ModalManager.init();
            await UIRenderer.init();

            // 為練習區塊設定複製事件監聽器
            function copyToClipboard(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.top = '-9999px';
                textArea.style.left = '-9999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {
                    console.error('無法複製題目:', err);
                }
                document.body.removeChild(textArea);
            }

            const practiceSection = document.getElementById('practice');
            if (practiceSection) {
                practiceSection.addEventListener('click', function(e) {
                    const copyBtn = e.target.closest('.copy-btn');
                    if (copyBtn) {
                        const textToCopy = copyBtn.dataset.copyText;
                        copyToClipboard(textToCopy);

                        // Visual feedback
                        const lang = AppState.currentLanguage;
                        const copiedText = Translations[lang].practice.copied;
                        const originalTitle = Translations[lang].practice.copyButtonTitle;
                        const checkIconSvg = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>`;
                        const originalIcon = copyBtn.innerHTML;

                        copyBtn.innerHTML = checkIconSvg;
                        copyBtn.title = copiedText;
                        copyBtn.disabled = true;

                        setTimeout(() => {
                            copyBtn.innerHTML = originalIcon;
                            copyBtn.title = originalTitle;
                            copyBtn.disabled = false;
                        }, 1500);
                    }
                });
            }
        }

        main();
    });
    </script>
</body>
</html>





